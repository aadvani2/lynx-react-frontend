
<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="index, follow"/>
<meta name="googlebot" content="index, follow"/>
<meta name="slurp" content="index"/>
<meta name="msnbot" content="index"/>
<meta name="distribution" content="global">
<meta name="generator" content="Lynx">
<link rel="canonical" href="https://www.connectwithlynx.com">

<title>Lynx - Connect with Top-Rated Licensed Home Service Professionals | No Lists, Just One Trusted Match</title>
<meta name="description" content="Skip the endless scrolling and quote roulette. Lynx connects you with one vetted, licensed home service professional who shows up and gets it done right. Fast matching, direct payment, no spam."/>
<meta name="keywords" content="home service professionals, licensed contractors, home repair matching, trusted home services, emergency home repair, plumbing electrician HVAC, home maintenance pros"/>

<meta property="og:title" content="Lynx - Connect with Top-Rated Licensed Home Service Professionals | No Lists, Just One Trusted Match">
<meta property="og:description" content="Skip the endless scrolling and quote roulette. Lynx connects you with one vetted, licensed home service professional who shows up and gets it done right. Fast matching, direct payment, no spam.">
<meta property="og:image" content="https://www.connectwithlynx.com/frontend_assets/img/logo-dark@2x.png">
<meta property="og:image:alt" content="Lynx">
<meta property="og:url" content="https://picturequotes.app">
<meta property="og:site_name" content="Lynx">
<meta property="og:type" content="website">
<meta property="og:image:type" content="image/webp">
<meta property="og:image:width" content="800">
<meta property="og:image:height" content="256">
<meta property="og:locale" content="en_US">
<meta name="author" content="Lynx">

<link rel="stylesheet" href="https://www.connectwithlynx.com/frontend_assets/css/plugins.css">
<link rel="stylesheet" href="https://www.connectwithlynx.com/frontend_assets/css/style.css?t=1753113220">
<link rel="icon" type="image/png" href="https://www.connectwithlynx.com/frontend_assets/favicon-96x96.png" sizes="96x96"/>
<link rel="icon" type="image/svg+xml" href="https://www.connectwithlynx.com/frontend_assets/favicon.svg"/>
<link rel="shortcut icon" href="https://www.connectwithlynx.com/frontend_assets/favicon.ico"/>
<link rel="apple-touch-icon" sizes="180x180" href="https://www.connectwithlynx.com/frontend_assets/apple-touch-icon.png"/>
<meta name="apple-mobile-web-app-title" content="Lynx"/>

<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

<link rel="manifest" href="https://www.connectwithlynx.com/frontend_assets/site.webmanifest"/>



    <link rel="stylesheet" href="https://www.connectwithlynx.com/frontend_assets/plugins/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@25.2.1/build/css/intlTelInput.css">
    <style>
        .input-container select {
            cursor: pointer;
        }
        .star-rating, .star-rating i {
            font-size: 0.8rem!important;
        }
        .star-rating label:before {
            content: "★";
            font-size: 1.2rem!important;
        }
        #howSoon {
            transition: all 0.3s ease-in-out;
            opacity: 0;
            transform: translateY(10px);
        }
        #howSoon.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
<!-- Meta Pixel Code -->
<script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '624470413325318');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
        src="https://www.facebook.com/tr?id=624470413325318&ev=PageView&noscript=1"
        /></noscript>

        <!--  -->
    </head>
<body class="">
        
        
        <div class="content-wrapper">
            <header class="wrapper">
                <nav class="navbar navbar-expand-lg center-nav transparent position-absolute navbar-light caret-none">
                    <div class="container flex-lg-row flex-nowrap align-items-center">
                        <div class="navbar-brand">
                            <a href="https://www.connectwithlynx.com">
                                <img src="https://www.connectwithlynx.com/frontend_assets/img/logo-header.svg" alt="" />
                                <img src="https://www.connectwithlynx.com/frontend_assets/img/logo-header-yellow.svg" alt="" class="header-logo-yellow" />
                            </a>
                        </div>
                        <div class="navbar-collapse offcanvas offcanvas-nav offcanvas-start">
                            <div class="offcanvas-header d-lg-none">
                                <a href="https://www.connectwithlynx.com" class="d-inline-flex">
                                    <img src="https://www.connectwithlynx.com/frontend_assets/img/logo.svg" srcset="https://www.connectwithlynx.com/frontend_assets/img/logo.svg 2x" alt="" />
                                </a>
                                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body d-flex flex-column h-100">
                                <ul class="navbar-nav">

                                    <li class="nav-item"><a class="nav-link" href="https://www.connectwithlynx.com">Home</a></li>

                                    <li class="nav-item dropdown-submenu">
                                        <a class="nav-link dropdown-submenu-toggle" href="https://www.connectwithlynx.com/services">Services </a>
                                            
                                                                                <ul class="dropdown-menu">
                                            
                                                                                        <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/services/indoor">Indoor</a>
                                            </li>
                                                                                        <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/services/exterior">Exterior</a>
                                            </li>
                                                                                        <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/services/lawn-garden">Lawn &amp; Garden</a>
                                            </li>
                                                                                        <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/services/premium">Premium</a>
                                            </li>
                                                                                        <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/services/restoration-cleaning">Restoration &amp; Cleaning</a>
                                            </li>
                                                                                        <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/services/general-contracting">General Contracting</a>
                                            </li>
                                                                                        <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/services/other">Other</a>
                                            </li>
                                                                                    </ul>
                                                                            </li>
                                    <li class="nav-item dropdown nav-item-dd">
                                        <a class="nav-link dropdown-toggle" href="https://www.connectwithlynx.com" data-bs-toggle="dropdown">Services</a>
                                                                                        <ul class="dropdown-menu">
                                                    <li class="nav-item">
                                                        <a class="dropdown-item" href="https://www.connectwithlynx.com/services">All</a>
                                                    </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/indoor">Indoor</a>
                                                </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/exterior">Exterior</a>
                                                </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/lawn-garden">Lawn &amp; Garden</a>
                                                </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/premium">Premium</a>
                                                </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/restoration-cleaning">Restoration &amp; Cleaning</a>
                                                </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/general-contracting">General Contracting</a>
                                                </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/other">Other</a>
                                                </li>
                                                                                            </ul>
                                                                            </li>

                                    <li class="nav-item"><a class="nav-link" href="https://www.connectwithlynx.com/service-area">Service Area</a></li>

                                                                        <li class="nav-item"><a class="nav-link" href="https://www.connectwithlynx.com/pricing">Pricing</a></li>
                                    
                                    <li class="nav-item dropdown-submenu">
                                        <a class="nav-link dropdown-submenu-toggle" href="javascript:void(0);"> About US</a>
                                        <ul class="dropdown-menu">
                                            <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/our-story">Our Story</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/our-partners">Our Partners</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/blogs">Our Blogs</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="nav-item dropdown nav-item-dd">
                                        <a class="nav-link  dropdown-toggle" href="javascript:void(0);" data-bs-toggle="dropdown"> About US</a>
                                        <ul class="dropdown-menu">
                                            <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/our-story">Our Story</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/our-partners">Our Partners</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="dropdown-item" href="https://www.connectwithlynx.com/blogs">Our Blogs</a>
                                            </li>
                                        </ul>
                                    </li>

                                    <li class="nav-item"><a class="nav-link" href="https://www.connectwithlynx.com/professional">For Professionals </a></li>

                                    <!-- <li class="nav-item dropdown nav-item-dd">
                                        <a class="nav-link dropdown-toggle" href="https://www.connectwithlynx.com" data-bs-toggle="dropdown">Services</a>
                                                                                    <ul class="dropdown-menu">
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/indoor">Indoor</a>
                                                </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/exterior">Exterior</a>
                                                </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/lawn-garden">Lawn &amp; Garden</a>
                                                </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/premium">Premium</a>
                                                </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/restoration-cleaning">Restoration &amp; Cleaning</a>
                                                </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/general-contracting">General Contracting</a>
                                                </li>
                                                                                                <li class="nav-item">
                                                    <a class="dropdown-item" href="https://www.connectwithlynx.com/services/other">Other</a>
                                                </li>
                                                                                            </ul>
                                                                            </li> -->
<!--

                                    
                                                                        <li class="nav-item"><a class="nav-link" href="https://www.connectwithlynx.com/our-story">Our Story</a></li>
                                    <li class="nav-item"><a class="nav-link" href="https://www.connectwithlynx.com/our-partners">Our Partners</a></li>














 -->

                                    <!-- <li class="nav-item"><a class="nav-link " href="https://www.connectwithlynx.com/professional">For Professionals</a></li>
                                    <li class="nav-item"><a class="nav-link" href="https://www.connectwithlynx.com/download">Download App</a></li> -->

                                    <!-- LOGIN MENU -->
                                    <li class="nav-item dropdown login-section">
                                        <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Log In</a>

                                        <ul class="dropdown-menu">
                                            <li class="nav-item"><a class="dropdown-item" href="https://www.connectwithlynx.com/sign-in/customer">Customer Login</a></li>
                                            <li class="nav-item"><a class="dropdown-item" href="https://www.connectwithlynx.com/sign-in/partner">Partner Login</a></li>
                                            <li class="nav-item"><a class="dropdown-item" href="https://www.connectwithlynx.com/sign-in/employee">Employee Login</a></li>
                                        </ul>
                                    </li>

                                    <!-- ACCOUNT MENU -->
                                    <li class="nav-item dropdown account-section" style="display: none;"><a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">My Account</a>
                                        <ul class="dropdown-menu">
                                            <a class="dropdown-item customer-only" style="display: none;" href="https://www.connectwithlynx.com/my-account">Dashboard</a>
                                            <a class="dropdown-item customer-only" style="display: none;" href="https://www.connectwithlynx.com/my-account#profile">Edit Profile</a>
                                            <a class="dropdown-item provider-only" style="display: none;" href="https://www.connectwithlynx.com/professional/my-account">Dashboard</a>
                                            <a class="dropdown-item provider-only" style="display: none;" href="https://www.connectwithlynx.com/professional/my-account#business-profile">Edit Profile</a>
                                            <a class="dropdown-item employee-only" style="display: none;" href="https://www.connectwithlynx.com/employee/my-account">Dashboard</a>
                                            <a class="dropdown-item user-logout" href="javascript:void(0)">Logout</a>
                                        </ul>
                                    </li>
                                    
                                </ul>
                                <!-- /.navbar-nav -->
                                <div class="offcanvas-footer d-lg-none">
                                    <div>
                                        <a href="/cdn-cgi/l/email-protection#bfd7dad3d3d0ffdcd0d1d1dadccbc8d6cbd7d3c6d1c791dcd0d2" class="link-inverse"><span class="__cf_email__" data-cfemail="6b030e0707042b080405050e081f1c021f030712051345080406">[email&#160;protected]</span></a><br/>
                                        <a href="tel:8774115969">+1  (877) 411-5969</a><br />
                                        <!-- /.social -->
                                    </div>
                                </div>
                                <!-- /.offcanvas-footer -->
                            </div>
                            <!-- /.offcanvas-body -->
                        </div>
                        <!-- /.navbar-collapse -->

                        <div class="navbar-other d-flex">
                            <ul class="navbar-nav flex-row ms-auto">
                                                                <li class="nav-item text-center position-relative">
                                    <a href="https://www.connectwithlynx.com/signup/customer" class="btn btn-sm btn-primary rounded-pill">
                                        <span>Join Free</span>
                                    </a>
                                    <p class="not-text mt-1 mb-1" style="font-size: 0.5rem; color: #1E4D5A;">No Credit Card Required</p>
                                </li>
                                                                                                    <li class="nav-item text-center partner-signup">
                                        <a href="https://www.connectwithlynx.com/signup/partner" class="btn btn-sm btn-primary rounded-pill">
                                            <span>Partner Signup</span>
                                        </a>
                                    </li>
                                                                 <li class="nav-item d-lg-none">
                                    <button class="hamburger offcanvas-nav-btn"><span></span></button>
                                </li>
                            </ul>
                            <!-- /.navbar-nav -->
                        </div>
                        <!-- /.navbar-other -->
                    </div>
                    <!-- /.container -->
                </nav>
                <!-- /.navbar -->
            </header>
            <!-- /header -->

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    // Must come immediately after header (not delayed in section
    window.sessionToken = '';
    window.userType = '';
</script>

    
    <section class="hero-banner wrapper bg-yellow home-2 home-v4">
        <div class="container pt-14 pt-md-14 pb-6">
            <div class="row gx-0 gy-10 align-items-center text-lg-start">
                <div class="col-lg-6 pt-8 pt-md-4 position-relative" data-group="page-title"><br/>
                    <h1 class="display-1 fs-30 mb-3 text-center font-bricolage"><span class="position-relative">
                            Lynx connects you with top-rated service professionals for your home or business - faster service, zero spam, and people you can trust.</span>
                    </h1>

                    <p class="lead fs-16 lh-sm mb-3 hero-banner-des text-center">From broken air conditioners to cluttered closets, Lynx makes it easy to get help you can count on.</p>
                    <div class="trust-starts pt-3">
                        <h3>Trust Starts Here</h3>
                        <p class="lead fs-14 lh-sm mb-3">We don't work with just anyone, neither should you</p>
                        <div class="box-main box-main-banner mb-6">
                            <div>
                                <span class="bg-aqua">
                                    <i class="uil uil-file-check"></i>
                                </span>
                                <h6>Vetted</h6>
                            </div>
                            <div>
                                <span class="bg-aqua">
                                    <i class="uil uil-award"></i>
                                </span>
                                <h6>Licensed</h6>
                            </div>
                            <div>
                                <span class="bg-aqua">
                                    <i class="uil uil-shield-check"></i>
                                </span>
                                <h6>Insured</h6>
                            </div>
                            <div>
                                <span class="bg-aqua">
                                    <i class="uil uil-user-check"></i>
                                </span>
                                <h6>Trusted</h6>
                            </div>
                        </div>
                        <div class="box-main box-main-banner box-main-banner-v2 box-banner-boxview" >
                            <a href="https://www.connectwithlynx.com/book-service/hvac" class="boxview-tag">
                                <i>
                                    <img src="https://www.connectwithlynx.com/frontend_assets/img/banner/icon/icon-hvac-repair-light.png" alt="icon-hvac-repair-light">
                                </i>
                                Air & Heat
                            </a>
                            <a href="https://www.connectwithlynx.com/book-service/pest-control" class="boxview-tag">
                                <i>
                                    <img src="https://www.connectwithlynx.com/frontend_assets/img/banner/icon/icon-pest-control-light.png" alt="icon-pest-control-light">
                                </i>
                                Pest Control
                            </a>
                            <a href="https://www.connectwithlynx.com/book-service/lawn-maintenance" class="boxview-tag">
                                <i>
                                    <img src="https://www.connectwithlynx.com/frontend_assets/img/banner/icon/icon-lawn-care-light.png" alt="icon-lawn-care-light">
                                </i>
                                Lawn Care
                            </a>
                            <a href="https://www.connectwithlynx.com/book-service/plumbing" class="boxview-tag">
                                <i>
                                    <img src="https://www.connectwithlynx.com/frontend_assets/img/banner/icon/icon-plumbing-light.png" alt="icon-plumbing-light">
                                </i>
                                Plumbing
                            </a>
                            <a href="https://www.connectwithlynx.com/book-service/moving" class="boxview-tag">
                                <i>
                                    <img src="https://www.connectwithlynx.com/frontend_assets/img/banner/icon/icon-moving-light.png" alt="icon-moving-light">
                                </i>
                                Moving
                            </a>
                            <a href="https://www.connectwithlynx.com/services" class="boxview-tag">
                                <i>
                                    <img src="https://www.connectwithlynx.com/frontend_assets/img/banner/icon/icon-all-services-light.png" alt="icon-all-services-light">
                                </i>
                                All Services
                            </a>
                        </div>
                    </div>
                </div>

                                    <div class="align-items-start d-flex flex-column justify-content-center mb-8 mt-5 tell-us-what">
                        <div class="tell-us-what-inner">
                            <h3 class="pt-0 ps-2 text-primary text-center">
                                Tell us what you need. We'll handle the rest.
                            </h3>
                            <div class="align-items-center d-flex flex-column justify-content-center w-100 w-auto">
                                <div class=" bg-primary p-md-5 px-3 py-5 rounded-pill " id="serviceForm">
                                    <form id="searchProviderForm" class="search-form search-form-v2 search-form-v3" method="GET" action="javascript:;" autocomplete="off">
                                        <div class="input-group search-bar justify-content-center">
                                            <div class="input-container d-flex align-items-center position-relative" id="search-wrapper">
                                                <input id="service-text" type="text" name="name" data-title="" class="form-control" placeholder="What do you need help with? (Press Enter to search)"  required>
                                                <input id="service_id" type="hidden" name="service_id" value="">
                                                <i id="search-icon" class="uil uil-search"></i>
                                                <i id="search-progress" class="d-none">
                                                    <span class="spinner-border spinner-border-sm m-0"></span>
                                                </i>
                                                <ul id="suggestion-box" class="list-group suggestions-list"></ul>
                                            </div>


                                            <div class="input-container-main d-flex align-items-center d-none" id="howSoon">
                                                <i class="uil uil-angle-double-right direction-arrow"></i>
                                                <div class="custom-select-wrapper input-container">
                                                    <div class="custom-select" id="service_tier" tabindex="0">
                                                        <span class="selected-text form-control ">
                                                            Schedule Your Time
                                                        </span>
                                                                                                                    <div class="options-list">
                                                                <ul>
                                                                                                                                                                                                                <li class="option service_tier" value="1" data-tag="Emergency">Emergency Service (1-4 Hrs) <span class="badge bg-primary rounded-pill">+$60.00</span></li>
                                                                                                                                            <li class="option service_tier" value="3" data-tag="Scheduled">Scheduled Service </li>
                                                                                                                                    </ul>
                                                            </div>
                                                                                                            </div>
                                                </div>
                                            </div>

                                            <div class="input-container-main d-flex align-items-center d-none" id="emergencyDate">
                                                <i class="uil uil-angle-double-right direction-arrow"></i>
                                                <div class="input-container">
                                                    <input id="emergency" type="text" name="date" class="form-control" placeholder="Select Time" readonly>
                                                </div>
                                            </div>
                                            <input id="emergency_time" type="hidden" name="emergency_time" />

                                            <div class="input-container-main d-flex align-items-center d-none" id="scheduleDate">
                                                <i class="uil uil-angle-double-right direction-arrow"></i>
                                                <div class="input-container">
                                                    <input id="schedule" type="text" name="date" class="form-control" placeholder="Select Preferred Time" required>
                                                    <i class="schedule-fa-eraser" style="display: none;">
                                                        <span class="badge bg-primary rounded-pill">Clear</span>
                                                    </i>
                                                </div>
                                            </div>

                                            <div class="input-container-main d-flex align-items-center d-none" id="zipCode">
                                                <i class="uil uil-angle-double-right direction-arrow"></i>
                                                <div class="input-container">
                                                    <input type="text" id="zip_code" class="form-control" placeholder="Zip Code" aria-label="Zip Code" required>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                                <div class="alert-msg fw-bold mb-0 mt-2 text-danger"></div>
                            </div>
                            <div id="searchResult"></div>
                            <div class="guarantee-wrap">
                                <div class="guarantee-box">
                                    <i>
                                        <img src="https://www.connectwithlynx.com/frontend_assets/img/banner/icon/icon-satisfaction-guarantee-dark.svg" alt="icon-satisfaction-guarantee-dark">
                                    </i>
                                    Satisfaction Guarantee
                                </div>
                                <div class="guarantee-box">
                                    <i>
                                        <img src="https://www.connectwithlynx.com/frontend_assets/img/banner/icon/icon-certified-dark.svg" alt="icon-certified-dark">
                                    </i>
                                    Vetted, Licensed & Insured
                                </div>
                            </div>
                        </div>
                    </div>
                            </div>
        </div>
        <div class="banner-image d-md-block d-none" style="background-image: url('https://www.connectwithlynx.com/frontend_assets/img/banner/hero-2-desktop-image.webp');">
        </div>
        <div class="banner-image d-md-none">
            <img src="https://www.connectwithlynx.com/frontend_assets/img/banner/hero-2-mobile-image-cropped.webp" alt="hero-2-mobile-image-cropped">
        </div>

    </section>

    <!----------------------PROVIDER LIST CODE START---------------------->

    <section class="search-form-result d-none" id="provider_list"></section>
    <section class="search-form-result d-none" id="searchResult-v2" >
        <div class="not-search-result">
            <div class="container">
                <div class="not-search-result-inner bg-primary p-5 rounded-4">
                    <div class="not-search-result-inner-main bg-white rounded-4 overflow-hidden position-relative">
                        <button type="button" class="not-search-close m-0 p-0 "></button>
                        <div class="border-bottom border-soft-violet not-search-result-top text-center">
                            <h2 class="font-bricolage">We’re not in your area just yet</h2>
                            <p>But we’re getting close. Lynx are expanding quickly.</p>
                            <h4 class="m-0 font-bricolage">Join our list and we’ll let you know the moment we go live near you.
                            </h4>
                        </div>
                        <div class="not-search-result-form">
                            <div class="not-result-form-content">
                                <div class="not-result-form-logo">
                                    <img src="https://www.connectwithlynx.com/frontend_assets/img/logo-header.svg" alt="" />
                                </div>
                                <div class="not-result-form-text">
                                    <h4 class="font-bricolage">Join our mailing list</h4>
                                    <p>and be the first to know when Lynx expands to your neighborhood</p>
                                </div>
                            </div>
                            <div class="not-result-form">
                                <form action="https://www.connectwithlynx.com/email-subscribe" method="POST" id="email-subscribe-form" class="form-subscribe">
                                    <div class="form-wrap">
                                        <div class="input-form-wrap form-floating">
                                            <input type="email" name="email" id="subscribe-email" class="form-control" placeholder="Email">
                                            <label for="subscribe-email">Email</label>
                                        </div>
                                        <div class="input-form-btn">
                                            <button type="submit" id="" class="btn btn-primary rounded-pill btn-send">Sign Up</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="search-form-result d-none" id="userConfirmation" >
        <div class="not-search-result">
            <div class="container">
                <div class="not-search-result-inner bg-primary p-5 rounded-4">
                    <div class="not-search-result-inner-main bg-white rounded-4 overflow-hidden position-relative">
                        <div class="border-bottom border-soft-violet not-search-result-top text-center">
                            <h2 class="font-bricolage">Emergency Window Triggered</h2>
                            <p>
                                Your scheduled time is within the next 4 hours. This is considered an emergency request.
                                                                    A $60.00 emergency matching fee will apply. Would you like to proceed?
                                                            </p>
                            <div class="d-flex flex-wrap justify-content-center gap-3">
                                <button type="button" id="cancelled" class="btn btn-danger rounded-pill">Change Time</button>
                                <button type="button" id="processedWithEmergency" class="btn btn-primary rounded-pill">Confirm</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!----------------------PROVIDER LIST CODE END---------------------->

    <section class="wrapper bg-light">
        <div class="container py-6 py-md-6">
            <div class="card image-wrapper bg-full bg-soft-aqua mb-12" data-image-src="./assets/img/photos/bg22.png">
                <div class="card-body py-6 px-6">
                    <div class="row">
                        <div class="col-xxl-10 mx-auto" data-cues="slideInUp" data-duration="1200">
                            <h4 class="section-title font-bricolage mb-md-7 mb-4">Lynx is Coming Soon - Launching July 2025!</h4>
                            <h5><b>Joining Lynx is 100% free, no upfront costs, and signing up takes just minutes. No
                                    hoops. No hassle. Just jobs.</b></h5>
                            <p>We’re getting ready to change the game in home services—faster matches, top-rated pros,
                                no more headaches. Lynx goes live in July 2025, and you can get in early.</p>
                            <ul>
                                <li>Customers – Sign up for FREE today and be the first to know when we launch.</li>
                                <li>Service Providers – We’re onboarding now—secure your spot before we fill up!</li>
                            </ul>
                            <p>Why wait? Get ahead of the pack—sign up now and be ready when Lynx drops.</p>
                                                            <span><a class="btn btn-primary rounded-pill" href="https://www.connectwithlynx.com/signup">Create Your Free Account</a></span>
                                                    </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xxl-10 mx-auto">
                    <div class="row gx-lg-8 gx-xl-12 gy-10 align-items-center">
                        <div class="col-lg-5 position-relative order-lg-2 mb-5 what-is-lynx">
                            <div class="what-is-lynx-img overlap-grid overlap-grid-2">
                                <div class="item">
                                    <figure class="rounded shadow" data-cues="slideInUp" data-duration="1200">
                                        <img src="https://www.connectwithlynx.com/frontend_assets/img/hero2.png" srcset="https://www.connectwithlynx.com/frontend_assets/img/hero2.png 2x" alt="">
                                    </figure>
                                </div>
                                <div class="item">
                                    <figure class="rounded shadow" data-cues="slideInUp" data-duration="1200">
                                        <img src="https://www.connectwithlynx.com/frontend_assets/img/hero1.jpg" srcset="https://www.connectwithlynx.com/frontend_assets/img/hero1.jpg 2x" alt="">
                                    </figure>
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <div class="col-md-12 col-lg-10 mx-auto position-relative" data-cues="slideInUp" data-duration="1200">
                                <h3 class="section-title font-bricolage mb-3 px-xl-6 ">How It Works</h3>
                                <h3 class="mb-0">The easy way to get things fixed — without the runaround.</h3>
                            </div>
                        </div>
                        <div class="col-12 mt-lg-10 mt-7">
                            <div class="row how-it-works mb-6">
                                <div class="col-xxl-12 mx-auto">
                                    <div class="row gy-0 gy-lg-0 d-flex align-items-lg-center row-gap-md-6 row-gap-4">
                                        <div class="col-lg-4 col-md-6 offset-lg-0 offset-md-3 text-center">
                                            <video class="max-width-60" autoplay loop muted playsinline>
                                                <source src="https://www.connectwithlynx.com/frontend_assets/videos/signup.mp4" type="video/mp4">
                                                Your browser does not support the video.
                                            </video>
                                        </div>

                                        <div class="col-md-6 col-lg-4 order-lg-first">
                                            <div class="mb-md-6 mb-4 text-center" data-cues="slideInUp" data-duration="1200">
                                                <h4 class="mb-1">1. Tell us what you need.</h4>
                                                <p class="mb-0 ">Leak, short circuit, garage won’t open — whatever’s
                                                    broken, we’re listening.</p>
                                            </div>

                                            <div class="text-center" data-cues="slideInUp" data-duration="1200">
                                                <h4 class="mb-1 text-center">2. Pick your timing.</h4>
                                                <p class="text-center mb-0">Need help now? We’ll send someone fast. Planning ahead? Your call.</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6 col-lg-4">
                                            <div class="mb-md-6 mb-4 text-center" data-cues="slideInUp" data-duration="1200">
                                                <h4 class="mb-1">3. Get matched with one trusted pro.</h4>
                                                <p class="mb-0">No marketplaces. No quote roulette. Just a pro who shows up and gets it done right.</p>
                                            </div>

                                            <div class="text-center" data-cues="slideInUp" data-duration="1200">
                                                <h4 class="mb-1">4. Track, chat, done.</h4>
                                                <p class="mb-0">You get updates. You talk to your pro. You pay them directly.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr class="my-6"/>
                        <div class="text-center why-choose-lynx">
                            <div class="col-md-10 col-lg-7 mx-auto position-relative" data-cues="slideInUp" data-duration="1200">
                                <h3 class="section-title font-bricolage mb-3 px-xl-6">Why Choose Lynx?</h3>
                                <h3 class="mb-0">You've tried the others. This one actually works.</h3>
                            </div>
                        </div>
                        <div class="col-lg-7 mt-lg-10 mt-7">
                            <ul class="icon-list bullet-bg bullet-soft-aqua mb-0" data-cues="slideInUp" data-duration="1200">
                                <li class="mb-lg-6 mb-5"><span><i class="uil uil-check text-primary"></i></span>
                                    <h4 class="mobile-text-left ">No spam. No lists. No guessing.</h4>
                                    We connect you with one trusted pro — not a directory that will treat you like a lead.
                                </li>
                                <li class="mb-lg-6 mb-5"><span><i class="uil uil-check text-primary"></i></span>
                                    <h4 class="mobile-text-left">We vet the customer and the provider.</h4>
                                    You both deserve to work with someone serious.
                                </li>
                                <li class="mb-lg-6 mb-5"><span><i class="uil uil-check text-primary"></i></span>
                                    <h4 class="mobile-text-left">Need help in hours? Days? Next week?</h4>
                                    ASAP? Later this week? Totally up to you.
                                </li>
                                <li class="mb-lg-6 mb-5"><span><i class="uil uil-check text-primary"></i></span>
                                    <h4 class="mobile-text-left">Pay your pro directly.</h4>
                                    No weird fees. No surprise charges.
                                </li>
                                <li><span><i class="uil uil-check text-primary"></i></span>
                                    <h4 class="mobile-text-left">Emergency support without emergency headaches.</h4>
                                    We'll get someone to you — fast, not frantic.
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section>
        <div class="container">
            <hr class="my-6 mobile-hr"/>
        </div>
    </section>

            <section class="wrapper bg-light testimonials">
            <div class="container py-6 py-md-8">
                <div data-cues="slideInUp" data-duration="1200">
                    <h2 class="section-title font-bricolage mb-3 text-center">Testimonials</h2>
                    <h3 class="text-center mb-6 px-md-16 px-lg-0">Don't just take our word for it. See why customers are loving Lynx.</h3>
                </div>
                <div class="position-relative" data-cues="slideInUp" data-duration="1200">
                    <div class="swiper-container dots-closer mb-0" data-margin="0" data-dots="true" data-items-xl="3" data-items-md="2" data-items-xs="1" data-loop="true" data-autoplay="true" data-autoplay-timeout="5000">
                        <div class="swiper">
                            <div class="swiper-wrapper">
                                                                    <div class="swiper-slide h-auto d-flex">
                                        <div class="item-inner w-100 d-flex">
                                            <div class="card w-100">
                                                <blockquote class="icon mb-0" style="margin: 18px;">
                                                    <div class="card-body">
                                                        <p style="margin: 8px;">“I’ve used other platforms. This was better. Fewer steps. Fewer surprises.
                                                            ”</p>
                                                        <div class="blockquote-details">
                                                            <div class="info ps-0">
                                                                <h5 class="mb-1"
                                                                    style="margin: 8px;">Melissa H., Plano</h5>
                                                                <!--<p class="mb-0">Financial Analyst</p>-->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </blockquote>
                                            </div>
                                        </div>
                                    </div>
                                                                    <div class="swiper-slide h-auto d-flex">
                                        <div class="item-inner w-100 d-flex">
                                            <div class="card w-100">
                                                <blockquote class="icon mb-0" style="margin: 18px;">
                                                    <div class="card-body">
                                                        <p style="margin: 8px;">“My AC went out the day before we hosted a birthday party. Lynx had someone here in 3 hours. No nonsense, no quotes, just fixed.
                                                            ”</p>
                                                        <div class="blockquote-details">
                                                            <div class="info ps-0">
                                                                <h5 class="mb-1"
                                                                    style="margin: 8px;">Alex G., North Dallas</h5>
                                                                <!--<p class="mb-0">Financial Analyst</p>-->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </blockquote>
                                            </div>
                                        </div>
                                    </div>
                                                                    <div class="swiper-slide h-auto d-flex">
                                        <div class="item-inner w-100 d-flex">
                                            <div class="card w-100">
                                                <blockquote class="icon mb-0" style="margin: 18px;">
                                                    <div class="card-body">
                                                        <p style="margin: 8px;">“I didn’t want a list. I wanted the right person. Lynx nailed it.
                                                            ”</p>
                                                        <div class="blockquote-details">
                                                            <div class="info ps-0">
                                                                <h5 class="mb-1"
                                                                    style="margin: 8px;">Chris D., Arlington</h5>
                                                                <!--<p class="mb-0">Financial Analyst</p>-->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </blockquote>
                                            </div>
                                        </div>
                                    </div>
                                                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    
    <div class="modal fade" id="modal-signin" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content text-center">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                <h4 class="text-start">Login</h4>
            </div>
            <div class="modal-body">
                <p class="mb-6 text-start">Please login to your account.</p>
                <form class="text-start mb-3 login-form" id="login-form" data-modal="1" action="https://www.connectwithlynx.com/login" method="post">
                    <input type="hidden" name="_token" value="4ZfuEu5mqi9FPZKnzGStckEf5nj1iS1n79ORhC5f" autocomplete="off">                    <input type="hidden" name="user_type" value="customer">
                    <input type="hidden" name="device_info_json" id="register_device_info_json">
                    <div class="form-floating mb-4">
                        <input type="email" name="email" class="form-control" placeholder="Email" id="loginEmail">
                        <label for="loginEmail">Email</label>
                    </div>
                    <div class="form-floating password-field mb-4">
                        <input type="password" name="password" class="form-control" placeholder="Password" id="loginPassword">
                        <span class="password-toggle"><i class="uil uil-eye"></i></span>
                        <label for="loginPassword">Password</label>
                    </div>
                    <div class="alert d-none" id="loginResponse"></div>
                    <button type="submit" class="btn btn-primary rounded-pill btn-login w-100 mb-2" id="login-form-submit">Sign In</button>
                    <button type="button" data-bs-target="#modal-signup" data-bs-toggle="modal" data-bs-dismiss="modal" class="btn btn-outline-primary rounded-pill btn-login w-100 mb-2">Sign up</button>
                </form>
                <p class="mb-0"><a href="#" class="hover" data-bs-target="#modal-forgot-password" data-bs-toggle="modal" data-bs-dismiss="modal">Forgot Password?</a></p>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal-signup" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content text-center">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                <h4 class="text-start">Sign up to Lynx</h4>
            </div>
            <div class="modal-body">
                <p class="mb-6 text-start">Registration takes less than a minute.</p>
                <form class="text-start mb-3 signup-form" id="signup-form" data-modal="1" action="https://www.connectwithlynx.com/register" method="post">
                    <input type="hidden" name="_token" value="4ZfuEu5mqi9FPZKnzGStckEf5nj1iS1n79ORhC5f" autocomplete="off">                    <input type="hidden" name="reCaptchaKey" id="reCaptchaKey" value="6LcOT8snAAAAAOck65lcHP3Cw_yGpyS0ciBjC9fH">
                    <input type="hidden" name="device_info_json" id="device_info_json">
                    <input type="hidden" name="user_type" value="customer">
                    <div class="form-floating mb-4">
                        <input type="text" name="name" class="form-control" placeholder="Name" id="registerName" value="">
                        <label for="registerName">Name</label>
                    </div>
                    <div class="form-floating mb-4">
                        <input type="email" name="email" class="form-control" placeholder="Email" id="registerEmail" value="">
                        <label for="registerEmail">Email</label>
                    </div>
                    <div class="form-floating mb-4">
                        <div class="form-group" id="phoneDiv">
                            <input type="text" name="phone" class="form-control" placeholder="Phone" id="phone" maxlength="16" itemid="phone">
                            <input type="hidden" name="dial_code" id="dial_code" value="1">
                            <input type="hidden" name="country_code" id="country_code" value="US">
                        </div>
                    </div>
                    <div class="form-floating password-field mb-4">
                        <input type="password" name="password" class="form-control" placeholder="Password" id="registerPassword">
                        <span class="password-toggle"><i class="uil uil-eye"></i></span>
                        <label for="registerPassword">Password</label>
                    </div>
                    <div class="form-floating password-field mb-4">
                        <input type="password" name="password_confirmation" class="form-control" placeholder="Confirm Password" id="registerPasswordConfirm">
                        <span class="password-toggle"><i class="uil uil-eye"></i></span>
                        <label for="registerPasswordConfirm">Confirm Password</label>
                    </div>
                    <input type="hidden" name="recaptcha_token" id="recaptcha_token">
                    <div class="alert d-none" id="registerResponse"></div>
                    <button type="submit" id="signup-form-submit" class="btn btn-primary rounded-pill btn-login w-100 mb-2">Sign Up</button>
                    <button type="button"  data-bs-target="#modal-signin" data-bs-toggle="modal" data-bs-dismiss="modal" class="btn btn-outline-primary rounded-pill btn-login w-100">Sign in</button>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal-verify" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content text-center">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                <h4 class="text-start">Verify your account</h4>
            </div>
            <div class="modal-body">
                <p class="mb-6 text-start">A verification code has been sent to your mobile number. Please enter the code below to verify your account.</p>
                <form class="text-start mb-3 verify-form" id="verify-form" data-modal="1" method="POST" action="https://www.connectwithlynx.com/verify-code">
                    <input type="hidden" name="_token" value="4ZfuEu5mqi9FPZKnzGStckEf5nj1iS1n79ORhC5f" autocomplete="off">                    <input type="hidden" name="temp_token" value="">
                    <div class="form-floating mb-4">
                        <input type="number" class="form-control" placeholder="Verification code" name="code" id="code">
                        <label for="code">Verification code</label>
                    </div>
                    <div class="alert d-none" id="verifyResponse"></div>
                    <button type="submit" id="verify-form-submit" class="btn btn-primary rounded-pill btn-login w-100 mb-2">Verify</button>
                </form>
                <a href="javascript:void(0);" id="resend-otp-btn">Resend</a>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal-forgot-password" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content text-center">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                <h4 class="text-start">Forgot Password?</h4>
            </div>
            <div class="modal-body">
                <p class="mb-6 text-start field-msg">Enter your email address to receive password reset instructions.</p>
                <form class="text-start mb-3 forgot-pwd-form" id="forgot-pwd-form" data-modal="1" method="POST" action="https://www.connectwithlynx.com/do-forgot-password">
                    <input type="hidden" name="_token" value="4ZfuEu5mqi9FPZKnzGStckEf5nj1iS1n79ORhC5f" autocomplete="off">                    <input type="hidden" name="user_type" value="customer">
                    <div class="email form-floating mb-4">
                        <input type="email" name="email" class="form-control" placeholder="Email" id="forgotEmail" >
                        <label for="forgotEmail">Email</label>
                    </div>
                    <div class="phone form-floating mb-4 d-none">
                        <div class="form-group" id="forgotPhoneDiv">
                            <input type="text" name="phone" class="form-control" placeholder="Phone Number" id="forgot_phone" maxlength="16" itemid="phone">
                            <input type="hidden" name="dial_code" id="forgot_dial_code" value="1">
                            <input type="hidden" name="country_code" id="forgot_country_code" value="us">
                            <input type="hidden" name="reset_type" class="reset_type" id="reset_type" value="email">
                        </div>
                    </div>
                    <div class="alert d-none" id="forgotResponse"></div>
                    <button type="submit" id="forgot-pwd-form-submit" class="btn btn-primary rounded-pill btn-login w-100 mb-2">Send Code</button>
                </form>
                <div class="text-center">
                    <a class="try-phone" href="javascript:;" onclick="changeToPhone()"> Try using phone number</a>
                    <a class="try-email d-none" href="javascript:;" onclick="changeToEmail()"> Try using email</a>
                    <p class="mb-0 mt-3">Need help? <a href="https://www.connectwithlynx.com/contact" target="_blank" class="hover">Contact Support</a></p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modal-reset-password" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered modal-sm">
        <div class="modal-content text-center">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                <h4 class="text-start">Reset Password</h4>
            </div>
            <div class="modal-body">
                <p class="mb-6 text-start">Enter your password and repeat it</p>
                <form class="text-start mb-3 mt-3 reset-pwd-form" data-modal="1" method="POST" action="https://www.connectwithlynx.com/do-reset-password">
                    <input type="hidden" name="_token" value="4ZfuEu5mqi9FPZKnzGStckEf5nj1iS1n79ORhC5f" autocomplete="off">                    <div class="form-floating mb-4">
                        <input type="number" class="form-control" name="code" placeholder="Enter Code" id="code1">
                        <label for="code1">Code</label>
                    </div>
                    <div class="form-floating password-field mb-4">
                        <input type="password" name="password" class="form-control" placeholder="Password" id="resetPassword">
                        <span class="password-toggle"><i class="uil uil-eye"></i></span>
                        <label for="resetPassword">Password</label>
                    </div>
                    <div class="form-floating password-field mb-4">
                        <input type="password" class="form-control" name="password_confirmation" placeholder="Confirm Password" id="resetConfirmPassword">
                        <span class="password-toggle"><i class="uil uil-eye"></i></span>
                        <label for="resetConfirmPassword">Confirm Password</label>
                    </div>
                    <div class="alert d-none" id="resetPasswordResponse"></div>
                    <button type="submit" id="reset-pwd-form-submit" class="btn btn-primary rounded-pill btn-login w-100 mb-2">Send Code</button>
                </form>
            </div>
        </div>
    </div>
</div>


</div>


<footer class="bg-dark text-inverse">
    <div class="container pt-13 pt-md-15 pb-7">
        <div class="row gy-6 gy-lg-0">
            <div class="col-md-12 col-lg-4">
                <div class="widget">
                    <img class="mb-4" src="https://www.connectwithlynx.com/frontend_assets/img/logo-footer.svg"
                        srcset="https://www.connectwithlynx.com/frontend_assets/img/logo.svg 2x" alt="" width="160px">
                    <p>One request. One trusted pro. No noise. Just help.</p>
                                            <div class="d-flex justify-content-start">
                            <i class="uil uil-map-marker"></i>
                            <address class="mb-1 ms-1">
                                Dallas-Fort Worth, TX
                            </address>
                        </div>
                    
                    <div class="d-flex justify-content-start">
                        <i class="uil uil-envelope-alt"></i>
                        <div class="mb-1 ms-lg-1 ms-1">
                            <a href="/cdn-cgi/l/email-protection#f79f929b9b98b794989999929483809e839f9b8e998fd994989a"><span class="__cf_email__" data-cfemail="e38b868f8f8ca3808c8d8d868097948a978b8f9a8d9bcd808c8e">[email&#160;protected]</span></a><br />
                        </div>
                    </div>
                    <div class="d-flex justify-content-start">
                        <i class="uil uil-phone"></i>
                        <div class="mb-1 ms-1">

                                                                    <a
                                        href="tel:+18774115969">+1 (877) 411-5969</a>
                                
                        </div>
                    </div>
                    <div class="d-flex justify-content-start">
                        <i class="uil uil-phone"></i>
                        <div class="mb-1 ms-1">

                                                            <a
                                    href="tel:+18774115969">+1 (877) 411-LYNX</a>
                            
                        </div>
                    </div>
                                        <nav class="nav social text-md-end mt-2">
                                                                                                
                    </nav>
                </div>
            </div>
            <div class="col-6 col-md-6 col-lg-2">
                <div class="widget">
                    <h4 class="widget-title text-white mb-3">Learn More</h4>
                    <ul class="list-unstyled text-white mb-0">
                        <li><a href="https://www.connectwithlynx.com/our-story">Our Story</a></li>
                        <li><a href="https://www.connectwithlynx.com/blogs">Blogs</a></li>
                        <li><a href="https://www.connectwithlynx.com/security">Security</a></li>
                        <li><a href="https://www.connectwithlynx.com/testimonials">Testimonials</a></li>
                        <li><a href="https://www.connectwithlynx.com/contact">Contact Us</a></li>
                        <li ><a href="https://www.connectwithlynx.com/download">Download App</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-6 col-md-6 col-lg-3">
                <div class="widget">
                    <h4 class="widget-title text-white mb-3">Need Help?</h4>
                    <ul class="list-unstyled text-white mb-0">
                        <li><a href="https://www.connectwithlynx.com/faqs">FAQs</a></li>
                        <li><a href="https://www.connectwithlynx.com/privacy-policy">Privacy Policy</a></li>
                        <li><a href="https://www.connectwithlynx.com/terms-of-use">Terms of Use</a></li>
                        <li><a href="https://www.connectwithlynx.com/cookie-policy">Cookie Policy</a></li>
                        <li><a href="https://www.connectwithlynx.com/privacy-request-form">Privacy Request Form</a></li>
                        <li><a href="https://www.connectwithlynx.com/lynx-agreement">LYNX Agreement</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-6 col-lg-3">
                <div class="widget">
                    <h4 class="widget-title text-white mb-3">Download App</h4>
                    <p>Lynx is available to download from both App Store and Google Play Store.</p>
                    <div class="d-flex align-items-center flex-wrap gap-1">
                        <a href="https://www.connectwithlynx.com/download" target="_blank">
                            <img width="120px" src="https://www.connectwithlynx.com/frontend_assets/img/playstore.webp"
                                alt="" /></a>
                        &nbsp;
                        <a href="https://www.connectwithlynx.com/download" target="_blank">
                            <img width="120px" src="https://www.connectwithlynx.com/frontend_assets/img/appstore.webp" alt="" />
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <hr class="mt-13 mt-md-15 mb-7" />
        <div class="d-md-flex align-items-center justify-content-between">
            <p class="mb-2 mb-lg-0">©2025 Lynx Connections, LLC. | All rights reserved.</p>

        </div>
    </div>
</footer>
<!--<div class="progress-wrap">
    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
    </svg>
</div>-->

<input type="hidden" id="pcDeviceToken" value="">
<input type="hidden" id="chatUserIdentity" value="">
<input type="hidden" id="chatAuthUserName" value="">
<input type="hidden" id="chatAuthUserType" value="">
<!-- Chat container -->
<div id="lynx-chat-container"
    class="lynx-chat-container overflow-hidden lynx-fullscreen-animation-smooth position-fixed bottom-0 end-0 bg-white rounded-4 shadow d-flex flex-column d-none"
    style="width: 350px;">
    <!-- Normal mode layout -->
    <div id="lynx-normal-layout" class="d-flex flex-column h-100 w-100">
        <!-- Contacts view -->
        <div id="lynx-contacts-view" class="d-flex flex-column h-100">
            <!-- Contacts header -->
            <div class="d-flex align-items-center justify-content-between p-3 bg-yellow">
                <div class="d-flex align-items-center">
                    <h2 class="fs-16 fw-semibold text-dark mb-0">Conversations</h2>
                </div>
                <div class="d-flex align-items-center lynx-action-btn">
                    <button id="expand-contacts" class="btn btn-sm bg-white me-2 p-0 ">
                        <i class="uil uil-expand-arrows-alt"></i>
                    </button>
                    <button id="lynx-contacts-minimize" class="btn btn-sm bg-white p-0 ">
                        <i class="uil uil-multiply"></i>
                    </button>
                </div>
            </div>
            <!-- Search bar -->
            
            <!-- Contacts list -->
            <div class="flex-grow-1 overflow-auto" style="height: 350px;" id="lynx-contacts-list">
               
                <!-- Contact item -->
            </div>
        </div>
        <!-- Chat view (initially hidden) -->
        <div id="lynx-chat-view" class="d-flex flex-column h-100 d-none">
            <!-- Chat header -->
            <div class="d-flex align-items-center justify-content-between p-3 bg-yellow">
                <div class="d-flex align-items-center cursor-pointer" id="lynx-back-to-contacts">
                    <i class="uil uil-angle-left-b me-3" style="cursor: pointer"></i>
                    <div class="lynx-avatar">
                        <img id="chat-avatar"
                            src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSIjZjNmNGY2Ij48Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIHI9IjEwMCIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjgwIiByPSI0MCIgZmlsbD0iIzZiNzI4MCIvPjxwYXRoIGQ9Ik0xNjAsMTY1YzAsMCwwLTQwLTYwLTQwcy02MCw0MC02MCw0MFMxNjAsMTY1LDE2MCwxNjV6IiBmaWxsPSIjNmI3MjgwIi8+PC9zdmc+"
                            alt="User Avatar" class="rounded-circle" width="40" height="40" />
                        
                    </div>
                    <div class="ms-3">
                        <p id="chat-name" class="fw-semibold text-dark mb-0"></p>
                        <p id="chat-users-name" class="fs-12 text-dark mb-0"></p>
                    </div>
                </div>
                <div class="d-flex align-items-center lynx-action-btn">
                 
                    <button id="expand-chat" class="btn btn-sm bg-white me-2 p-0 ">
                        <i class="uil uil-expand-arrows-alt"></i>
                    </button>
                    <button id="minimize-lynx-chat" class="btn btn-sm bg-white p-0 ">
                        <i class="uil uil-multiply"></i>
                    </button>
                </div>
            </div>
            <!-- Chat messages -->
            <div id="lynx-messages" class="lynx-messages flex-grow-1 p-3 overflow-auto" style="height: 320px;">
                
            </div>
            <!-- Chat input -->
            <div class="border-top p-3 chat-msg-bottom">
                <div class="d-flex align-items-center">
                  
                    <input id="lynx-message-input" type="text" placeholder="Message..." class="form-control lynx-message-input" required/>
                    <button id="send-button" class="btn btn-sm text-primary ms-2 px-2 py-1">
                        <i class="uil uil-location-arrow fs-25 d-flex" style="line-height: 1; "></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Fullscreen mode layout (initially hidden) -->
    <div id="lynx-fullscreen-layout" class="d-none h-100 w-100 d-flex">
        <!-- Contacts sidebar -->
        <div id="lynx-fullscreen-contacts" class="border-end border-light-subtle d-flex flex-column h-100"
            style="width: 20%;">
            <!-- Contacts header -->
            <div class="d-flex align-items-center justify-content-between p-3 bg-yellow fullscreen-conversations-title">
                <div class="d-flex align-items-center">
                    <h2 class="fs-16 fw-semibold text-dark mb-0">Conversations</h2>
                </div>

            </div>
            <!-- Search bar -->
            
            <!-- Contacts list -->
            <div class="flex-grow-1 overflow-auto lynx-list-container" id="fullscreen-contacts-lynx-list">
                <!-- Contact items will be cloned here -->
            </div>
        </div>
        <!-- Chat area -->
        <div id="lynx-fullscreen-chat" class="d-flex flex-column h-100" style="width: 80%;">
            <!-- Chat header -->
            <div class="d-flex align-items-center justify-content-between p-3 bg-yellow">
                <div class="d-flex align-items-center">
                    <div class="lynx-avatar">
                        <img id="fullscreen-chat-lynx-avatar"
                            src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBmaWxsPSIjZjNmNGY2Ij48Y2lyY2xlIGN4PSIxMDAiIGN5PSIxMDAiIHI9IjEwMCIvPjxjaXJjbGUgY3g9IjEwMCIgY3k9IjgwIiByPSI0MCIgZmlsbD0iIzZiNzI4MCIvPjxwYXRoIGQ9Ik0xNjAsMTY1YzAsMCwwLTQwLTYwLTQwcy02MCw0MC02MCw0MFMxNjAsMTY1LDE2MCwxNjV6IiBmaWxsPSIjNmI3MjgwIi8+PC9zdmc+"
                            alt="User Avatar" class="rounded-circle" width="40" height="40" />
                        
                    </div>
                    <div class="ms-3">
                        <p id="fullscreen-chat-lynx-name" class="fw-semibold text-dark mb-0"></p>
                        <p id="fullscreen-chat-lynx-users-name" class="fs-12 text-dark mb-0"></p>
                        
                    </div>
                </div>
                <div class="d-flex align-items-center">
                  
                    <button id="exit-fullscreen-lynx-chat" class="btn btn-sm bg-white closed-fullscreen-btn">
                        <i class="uil uil-multiply"></i>
                    </button>
                </div>
            </div>
            <!-- Chat messages -->
            <div id="fullscreen-lynx-messages" class="lynx-messages flex-grow-1 p-3 overflow-auto">
                <!-- Messages will be dynamically inserted here -->
            </div>
            <!-- Chat input -->
            <div class="border-top p-3 chat-msg-bottom">
                <div class="d-flex align-items-center">
                    
                    <input id="fullscreen-lynx-message-input" type="text" placeholder="Message..." class="form-control lynx-message-input" required/>
                    <button id="fullscreen-send-button" class="btn btn-sm text-primary ms-2 px-2 py-1">
                        <i class="uil uil-location-arrow fs-25 d-flex" style="line-height: 1; "></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

 
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="https://www.connectwithlynx.com/frontend_assets/js/plugins.js"></script>
<script src="https://www.connectwithlynx.com/frontend_assets/js/theme.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script src="https://media.twiliocdn.com/sdk/js/chat/v3.3/twilio-chat.min.js"></script>
<script>
    var chatClient = null;
    var clientIdentity = $('#chatUserIdentity').val() ?? null;
    var activeClientChannel = null;
</script>
    <script src="https://www.connectwithlynx.com/vendor/sweetalert/sweetalert.all.js"></script>
    <script src="https://www.connectwithlynx.com/frontend_assets/js/custom.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/plugins/confirmDate/confirmDate.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.21.0/jquery.validate.min.js"></script>
    <script src="https://www.google.com/recaptcha/api.js?render=6LcOT8snAAAAAOck65lcHP3Cw_yGpyS0ciBjC9fH"></script>
    <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@25.2.1/build/js/intlTelInput.min.js"></script>
    <script src="https://www.connectwithlynx.com/frontend_assets/js/common.js"></script>

    <script type="text/javascript">
        let selected_service_tier = '';

        flatpickr("#schedule", {
            enableTime: true,
            dateFormat: "d M Y h:i K",
            time_24hr: false,
            minDate: new Date(),
            defaultDate: new Date(),
            defaultMinute: 0,
            minuteIncrement: 15,
            disableMobile: true
        });


        $(document).on('click', function(event) {
            //Hide the no provider part when user click outside the search result
            if (!$(event.target).closest('.not-search-result-inner').length) {
                hideNoProviderPart(); // or addClass('d-none')
            }
            //Hide the suggestion box when user click outside the search input or suggestion box
            if (!$(event.target).closest('#service-text, #suggestion-box, #suggestions-list').length) {
                $('#suggestion-box').empty().hide();
                selectedIndex = -1;
            }
        });

        function hideNoProviderPart(){
            $('#searchResult-v2').addClass('d-none');
        }

        const showError = (message) => {
            $('.alert-msg').removeClass('d-none').html(`${message}`);
            $(this).prop('disabled', false).html('Search');
            return true;
        };

        function searchServices(searchValue){
            if (searchValue.length > 3) {
                $('#search-icon').addClass('d-none');
                $('#search-progress').removeClass('d-none');
                fetch(`https://www.connectwithlynx.com/search?search=${encodeURIComponent(searchValue)}&searchForm=service`)
                    .then(response => response.json())
                    .then(response => {
                        $('#suggestion-box').empty();
                        let html = '';
                        if (response.length > 0) {
                            response.forEach(item => {
                                html += `
                                    <li class="list-group-item suggestion-item d-flex align-items-start w-100" data-type="service" data-service-id="${item.service_id}" data-title="${item.title}" data-category="${item.category}" data-sub-category="${item.sub_category}">
                                        <div class="suggestion-item-main flex-grow-1 flex-shrink-1">
                                            <strong>${item.title}</strong><br>
                                            <small>${item.sub_category}</small>
                                        </div>
                                        <span class="badge bg-primary rounded-pill ms-2">
                                            ${item.category}
                                        </span>
                                    </li>
                                `;
                            });



                            $('#suggestion-box').html(html).show();
                        } else {
                            html += `<li class="list-group-item no-found-result fs-13 bg-aqua p-3 border-0">
                                <div class="no-found-result text-center bg-white rounded-1 shadow p-3">
                                    That’s not something we offer - at least not yet. <br /><b> Lynx focuses on home and commercial property services. </b> But let us know what you need - your input helps us grow smarter.
                                    <div class="d-flex w-100 justify-content-center mt-2">
                                        <a href="https://www.connectwithlynx.com/contact" target="_blank" class="btn btn-primary btn-sm rounded-pill w-auto">Submit Feedback</a>
                                    </div>
                                </div>
                            </li>`;
                            $('#suggestion-box').html(html).show();
                        }


                        selectedIndex = -1;
                        $('#search-icon').removeClass('d-none');
                        $('#search-progress').addClass('d-none');
                    })
                    .catch(err => {
                        console.error('search result fetch failed:', err)
                        Swal.fire({
                            icon: 'error',
                            text: 'Error occurred while searching services',
                            customClass: {
                                confirmButton: 'btn btn-primary rounded-pill w-20',
                            },
                            buttonsStyling: false
                        });
                        $('#search-icon').removeClass('d-none');
                        $('#search-progress').addClass('d-none');
                    });
            } else {
                $('#suggestion-box').empty().hide();
                selectedIndex = -1; // Reset the selected index
            }
        }

        let subCatSlug = '';
        function bookService(result, pId =  0) {
            $('#modal-provider-list').modal('hide');
            if (typeof result === 'string') {
                result = JSON.parse(result);
            }

            
            // Construct the URL with query parameters
            const url = `https://www.connectwithlynx.com/redirect-book-service?service_tier_id=${encodeURIComponent(result.service_tier_id)}
            &pId=${encodeURIComponent(pId)}
            &cat_id=${encodeURIComponent(result.cat_id)}
            &subcat_id=${encodeURIComponent(result.subcat_id)}
            &service_ids=${encodeURIComponent(result.service_ids)}
            &service_titles=${encodeURIComponent(result.service_titles)}
            &main_category=${encodeURIComponent(result.main_category)}
            &sub_category=${encodeURIComponent(result.sub_category)}
            &service_subcat_slug=${encodeURIComponent(result.service_subcat_slug)}
            &schedule_time=${encodeURIComponent(result.schedule_time)}`;

            subCatSlug = result.service_subcat_slug;

            //call api to check user is logged or not and redirect to book service page
            fetch(`${url}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRF-TOKEN': "4ZfuEu5mqi9FPZKnzGStckEf5nj1iS1n79ORhC5f" // Include CSRF token
                }
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    var newUrl = "https://www.connectwithlynx.com/book-service/"+subCatSlug+"#select-address";
                    $('#login-form, #verify-form').attr('data-url', newUrl);

                    if (data.code === 401) {
                        $('#modal-signin').modal('show');
                        return;
                    }
                    if (data.success) {
                        window.location.href = data.redirect;
                    } else {
                        Swal.fire({
                            icon: 'error',
                            text: data.message,
                            customClass: {
                                confirmButton: 'btn btn-primary rounded-pill w-20',
                            },
                            buttonsStyling: false
                        });
                    }
                })
                .catch(error => {
                    console.error('Fetch error:', error);
                });
        }

        let selectedDateTime = null; // Store the correct value

        document.getElementById('zip_code').addEventListener('input', function () {
            // Remove all non-digit characters
            this.value = this.value.replace(/\D/g, '');
            if (this.value.length > 5) {
                this.value = this.value.slice(0, 5);
            }
        });

        $('#schedule').on('focus', function () {
            $(this).blur();
        });

        document.querySelector('#search-icon').addEventListener('click', searchHandelService);

        document.getElementById('service-text').addEventListener('keydown', function (e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                // ⛔ Skip this if a suggestion is selected
                if (typeof selectedIndex !== 'undefined' && selectedIndex >= 0) {
                    return;
                }
                // ✅ Allow normal behavior if not disabled
                if ($(this).prop('disabled')) {
                    $('#suggestion-box').empty().hide();
                    return;
                }

                console.log('Enter key pressed in service-text');
                searchHandelService();
            }
        });

        /**
         * search services suggestions sentences or list based on input
         * */

        let selectedIndex = -1;
        let debounceTimer;
        $('#service-text').on('input', function () {

            clearTimeout(debounceTimer);
            selectedIndex = -1;
            const query = $(this).val().trim();
            if (query.length < 3) {
                $('#suggestion-box').hide().empty();
                return;
            }

            debounceTimer = setTimeout(() => {
                $('#search-icon').addClass('d-none');
                $('#search-progress').removeClass('d-none');
                fetch(`https://www.connectwithlynx.com/search-service-suggestion?q=${encodeURIComponent(query)}&searchForm=service`)
                    .then(r => r.json())
                    .then(data => {
                        const suggestions = data.suggestions || [];
                        if (!suggestions.length) {

                            $('#suggestion-box').html(`
                                <li class="list-group-item text-muted">
                                    We couldn’t find any matching suggestions.<br>
                                    <small class="text-secondary">🔍 You can still press <strong>Enter</strong> to search with your full query.</small>
                                </li>
                            `).show();
                            $('#search-progress').addClass('d-none');
                            $('#search-icon').removeClass('d-none');

                            return;
                        }
                        let html = '';
                        suggestions.forEach((s, i) => {
                            if (s.type === 'service') {
                                html += `<li class="list-group-item suggestion-item d-flex align-items-start w-100" data-title="${s.title}" data-type="service" data-service-id="${s.service_id}" data-sub-category="${s.sub_category}">
                                <div class="suggestion-item-main flex-grow-1 flex-shrink-1">
                                    <strong>${s.title}</strong><br>
                                    <small>${s.sub_category}</small>
                                </div>
                                <span class="badge bg-primary rounded-pill ms-2">
                                    ${s.category}
                                </span>
                        </li>`;
                            } else {
                                html += `<li class="list-group-item suggestion-item" data-text="${s.text}" data-type="sentence">
                            <small class="text-black-50"><i class="fas fa-search"></i></small> ${s.text}
                        </li>`;
                            }
                        });
                        $('#suggestion-box').html(html).show();
                        $('#search-icon').removeClass('d-none');
                        $('#search-progress').addClass('d-none');
                    })
                    .catch(err => {
                        console.error('Suggestion fetch failed:', err)

                        $('#suggestion-box').html(`
                            <li class="list-group-item text-muted">
                                We couldn’t find any matching suggestions.<br>
                                <small class="text-secondary">🔍 You can still press <strong>Enter</strong> to search with your full query.</small>
                            </li>
                        `).show();
                        $('#search-icon').removeClass('d-none');
                        $('#search-progress').addClass('d-none');
                    });
            }, 250); // <-- increased debounce to 500ms
        });


        // Keyboard navigation for suggestions
        $(document).on('keydown', function (e) {
            const items = $('#suggestion-box .suggestion-item').filter(':visible');
            if (!items.length || !$(':focus').is('#service-text')) return;

            if (e.key === 'ArrowDown') {
                selectedIndex = (selectedIndex + 1) % items.length;
                e.preventDefault();
            } else if (e.key === 'ArrowUp') {
                selectedIndex = (selectedIndex - 1 + items.length) % items.length;
                e.preventDefault();
            } else if (e.key === 'Enter') {
                if (selectedIndex >= 0) {
                    const selectedItem = items.eq(selectedIndex);
                    const selectedText = selectedItem.data('text');
                    const selectedType = selectedItem.data('type');

                    $('#suggestion-box').hide();
                    console.log('Selected Type:', selectedType);

                    if (selectedType === 'sentence') {
                        $('#service-text').val(selectedText);
                        searchHandelService();
                    } else {
                        const selectedService = selectedItem.data('title');
                        const selectedSubcat = selectedItem.data('sub-category');
                        const selectedTitle = selectedSubcat + ' > ' + selectedService;

                        $("#service_id").val(selectedItem.data('service-id'));
                        $('#service-text').addClass('fill-inputs-design')
                            .prop('disabled', true)
                            .val(selectedTitle)
                            .attr('data-title', selectedTitle);
                        $('#suggestion-box').empty().hide();
                        $('#search-icon').removeClass('uil uil-search')
                            .html('<span class="badge bg-primary rounded-pill">X</span>');
                        $('#howSoon').addClass('show').removeClass('d-none');

                        const zipCode = $('#zip_code').val();
                        if (zipCode.length >= 5) {
                            searchOnZipCode(zipCode);
                        } else {
                            if (zipCode.length !== '') {
                                $('#provider_list').empty().addClass('d-none');
                            }
                        }
                    }

                    selectedIndex = -1;
                    e.preventDefault();
                    e.stopImmediatePropagation(); // ✅ This stops all other keydown handlers from running
                    return;
                }
                return;
            } else {
                return;
            }

            // Highlight selected item
            items.removeClass('active');
            const currentItem = items.eq(selectedIndex);
            currentItem.addClass('active');

            // Prevent auto-scroll: Ensure item is visible without scrolling the entire container unnecessarily
            const container = $('#suggestion-box'); // This is the scrollable container
            const itemTop = currentItem.position().top;
            const itemBottom = itemTop + currentItem.outerHeight();
            const containerScrollTop = container.scrollTop();
            const containerHeight = container.height();

            if (itemBottom > containerHeight) {
                container.scrollTop(containerScrollTop + itemBottom - containerHeight);
            } else if (itemTop < 0) {
                container.scrollTop(containerScrollTop + itemTop);
            }
        });



        function searchHandelService(){
            const searchIcon = document.getElementById('search-icon');
            const serviceText = document.getElementById('service-text').value.trim();

            if (searchIcon.classList.contains('uil-search')) {
                searchServices(serviceText); // Run your search
            } else {
                document.getElementById('service-text').value = '';
                $('#service-text').removeClass('fill-inputs-design').prop('disabled', false);
                $('.alert-msg, #provider_list').empty().addClass('d-none');
                searchIcon.innerHTML = '';
                searchIcon.classList.add('uil', 'uil-search');
            }
        }

        $('#schedule').on('change', function () {
            const value = $(this).val();
            const clearButton = document.querySelector('.schedule-fa-eraser');
            if (value) {
                clearButton.style.display = 'inline';
            } else {
                clearButton.style.display = 'none';
            }
        });

        // Clear the input field when the clear button is clicked
        document.querySelector('.schedule-fa-eraser').addEventListener('click', function () {
            document.getElementById('schedule').value = ''; // Clear input field
            $('.alert-msg, #provider_list').empty().addClass('d-none');
            this.style.display = 'none'; // Hide the clear button after clearing the input
            $('#schedule').removeClass('fill-inputs-design');
            return showError('Please select a preferred time.');
        });

        $(document).ready(function () {

            let selectedIndex = -1;

            $(document).on('click', '.suggestion-item', function () {
                const selectedType = $(this).data('type');
                if (selectedType === 'sentence') {
                    const selectedText = $(this).data('text');
                    $('#service-text').val(selectedText);
                    searchHandelService()
                }else{
                    const selectedService = $(this).data('title');
                    const selectedSubcat = $(this).data('sub-category');
                    const selectedTitle = selectedSubcat+' > '+ selectedService
                    $("#service_id").val($(this).data('service-id'));
                    $('#service-text').addClass('fill-inputs-design').prop('disabled', true).val(selectedTitle).attr('data-title', selectedTitle);
                    $('#suggestion-box').empty().hide();
                    $('#search-icon').removeClass('uil uil-search').html('<span class="badge bg-primary rounded-pill">X</span>');
                    selectedIndex = -1;
                    $('#howSoon').addClass('show').removeClass('d-none');
                    const zipCode = $('#zip_code').val();
                    if(zipCode.length >= 5){
                        searchOnZipCode(zipCode);
                    }else{
                        if(zipCode.length != ''){
                            $('#provider_list').empty().addClass('d-none');
                        }
                    }
                }
            });

            $('#zip_code').on('input', function () {
                // Remove all non-digit characters
                this.value = this.value.replace(/\D/g, '');
                const zip = $(this).val();
                $('#suggestion-box').hide();
                searchOnZipCode(zip);
            });

            function getRoundedTimeAfterHours(hoursAhead = 4, minuteStep = 15) {
                const now = new Date();
                const future = new Date(now.getTime() + hoursAhead * 60 * 60 * 1000);
                const minutes = future.getMinutes();
                const roundedMinutes = Math.ceil(minutes / minuteStep) * minuteStep;
                future.setMinutes(roundedMinutes);
                future.setSeconds(0);
                future.setMilliseconds(0);
                return future;
            }

            const roundedFutureTime = getRoundedTimeAfterHours();

            $('.service_tier').on('click', function () {
                selected_service_tier = $(this).attr('value');
                const tag = $(this).attr('data-tag');
                if (tag === 'Emergency') {
                    $('#emergencyDate').removeClass('d-none').val('Now');
                    $('#emergency').val('Now').addClass('fill-inputs-design');
                    $('#scheduleDate, #userConfirmation').addClass('d-none');
                    $('#zipCode').removeClass('d-none');

                    const now = new Date();
                    const year = now.getFullYear();
                    const month = (now.getMonth() + 1).toString().padStart(2, '0');
                    const day = now.getDate().toString().padStart(2, '0');
                    const hours = now.getHours().toString().padStart(2, '0');
                    const minutes = now.getMinutes().toString().padStart(2, '0');
                    const seconds = now.getSeconds().toString().padStart(2, '0');
                    const formattedDateTime = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
                    $('#emergency_time').val(formattedDateTime);

                    if ($('#userConfirmation').hasClass('d-none')) {
                        $('#zip_code').focus();
                        var zipCode = $('#zip_code').val();
                        searchOnZipCode(zipCode);
                    }
                } else if (tag === 'Urgent' || tag === 'Scheduled') {
                    $('#emergencyDate').addClass('d-none');
                    $('#scheduleDate, #zipCode').removeClass('d-none');
                    if ($('#userConfirmation').hasClass('d-none')) {
                        var zipCode = $('#zip_code').val();
                        searchOnZipCode(zipCode);
                    }
                } else {
                    $('#emergencyDate, #scheduleDate, #zipCode').addClass('d-none');
                }

                if (tag === 'Urgent') {
                    flatpickr("#schedule", {
                        enableTime: true,
                        dateFormat: "d M Y h:i K",
                        time_24hr: false,
                        defaultDate: new Date(),
                        minDate: new Date(new Date().setMinutes(0, 0, 0) + 60 * 60 * 1000),
                        maxDate: new Date().setHours(new Date().getHours() + 24),
                        defaultMinute: 0,
                        minuteIncrement: 15,
                        disableMobile: true,
                    });
                } else {
                    $('#service-text').focus();
                    flatpickr("#schedule", {
                        enableTime: true,
                        dateFormat: "d M Y h:i K",
                        time_24hr: false,
                        minDate: new Date(new Date().setMinutes(0, 0, 0) + 60 * 60 * 1000),
                        defaultDate: roundedFutureTime,
                        minuteIncrement: 15,
                        defaultMinute: 0,
                        disableMobile: true,
                        plugins: [
                            new confirmDatePlugin({
                                confirmText: "Confirm",
                                showAlways: false,
                                theme: "light"
                            })
                        ],
                        onReady: function(selectedDates, dateStr, instance) {
                            const footer = document.createElement("div");
                            instance.calendarContainer.appendChild(footer);
                            const confirmBtn = instance.calendarContainer.querySelector(".flatpickr-confirm");
                            if (confirmBtn) {
                                confirmBtn.classList.add("btn", "btn-primary", "rounded-pill", "btn-sm");
                                confirmBtn.id = "confirmBtn";
                                confirmBtn.addEventListener("click", function () {
                                    const selected = instance.selectedDates[0];
                                    const now = new Date();

                                    if (selected) {
                                        const diffMs = selected - now;
                                        const diffHours = diffMs / (1000 * 60 * 60);

                                        if (diffHours <= 4) {
                                            $('#provider_list').empty().addClass('d-none');
                                            $('#searchResult-v2').addClass('d-none');
                                            $('#userConfirmation').removeClass('d-none');
                                        }else{
                                            console.log('fill-inputs-design class adding....');
                                            $('#schedule').addClass('fill-inputs-design');
                                            $('#userConfirmation').addClass('d-none');
                                            searchProvider();
                                        }
                                    }
                                    instance.close();
                                });
                            }
                        }
                    });
                }
                $('#service_tier').addClass('fill-inputs-design');
            });

            $('#processedWithEmergency').on('click', function(){
                const emergencyLi = document.querySelector('.option.service_tier[data-tag="Emergency"]');
                if (emergencyLi) {
                    emergencyLi.click();
                    $('#provider_list').empty().addClass('d-none');
                    $('#userConfirmation').addClass('d-none');
                }
            })
            $('#cancelled').on('click', function(){
                $('#userConfirmation').addClass('d-none');
                const scheduledLi = document.querySelector('.option.service_tier[data-tag="Scheduled"]');
                if (scheduledLi) {
                    scheduledLi.click();
                    $('#schedule').removeClass('fill-inputs-design');
                    const fp = $('#schedule').get(0)._flatpickr;
                    if (fp) {
                        fp.open();
                    }
                }
            });

            /*----------------User Login-Register Process Start----------------*/
            $('#device_info_json').val(JSON.stringify(window.deviceInfo));
            $('#register_device_info_json').val(JSON.stringify(window.deviceInfo));

            setupPhoneInputs($("#phone"), $("#dial_code"), $("#country_code"));
            setupPhoneInputs($("#forgot_phone"), $("#forgot_dial_code"), $("#forgot_country_code"));

            /*----------------User Login-Register Process End----------------*/

            $('#email-subscribe-form').validate({
                rules: {
                    email: {
                        required: true,
                        email: true
                    }
                },
                messages: {
                    email: {
                        required: "Please enter your email",
                        email: "Please enter a valid email address"
                    }
                },
                errorPlacement: function (error, element) {
                    error.addClass('text-danger mt-1');
                    element.closest('.input-form-wrap').after(error);
                },
                submitHandler: function (form) {
                    $('.btn-send').prop('disabled', true).text('Signing up...');
                    const email = $('#subscribe-email').val();
                    fetch("https://www.connectwithlynx.com/email-subscribe", {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'X-CSRF-TOKEN': "4ZfuEu5mqi9FPZKnzGStckEf5nj1iS1n79ORhC5f" // Include CSRF token
                        },
                        body: JSON.stringify({
                            email: email
                        })
                    })
                        .then(response => {
                            if (!response.ok) {
                                throw new Error('Network response was not ok');
                            }
                            return response.json();
                        })
                        .then(response => {
                            $('.input-form-wrap').next('.email-response-msg').remove();
                            if(response.success){
                                Swal.fire({
                                    icon: 'success',
                                    title: 'Great!',
                                    text: response.message,
                                    customClass: {
                                        confirmButton: 'btn btn-primary rounded-pill w-20',
                                    },
                                    buttonsStyling: false
                                }).then(() => {
                                    $('#zip_code').val('').removeClass('fill-inputs-design').focus();
                                });
                                $('#email-subscribe-form')[0].reset();
                                $('#searchResult-v2').addClass('d-none');
                            }else{
                                const msgElement = `<div class="email-response-msg text-danger mt-1">${response.message}</div>`;
                                $('.input-form-wrap').after(msgElement);
                            }
                            $('.btn-send').prop('disabled', false).text('Sign Up');
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            $('.input-form-wrap').next('.email-response-msg').remove();
                            const msgElement = `<div class="email-response-msg text-danger mt-1 small">Something went wrong. Please try again later.</div>`;
                            $('.input-form-wrap').after(msgElement);
                            $('.btn-send').prop('disabled', false).text('Sign Up');
                        });
                }
            });
        });

        function searchProvider(){
            let date;
            $('#providerCount').remove();
            const service = $('#service-text').val();
            const serviceTitle = $('#service-text').attr('data-title');
            const zipCode = $('#zip_code').val();
            const serviceTier = selected_service_tier;
            if (serviceTier == 1) {
                date = $('#emergency_time').val();
            } else if (serviceTier == 2) {
                date = $('#schedule').val();
            } else {
                date = $('#schedule').val();
            }

            // === Validation in order using helper ===
            if (!serviceTier) return showError('Please select how soon you need the service.');
            if (!service) return showError('Please enter a service name.');
            if (!zipCode) return showError('Please enter your zip code.');
            if ((serviceTier === "2" || serviceTier === "3") && !date) {
                return showError('Please select a preferred time.');
            }
            if (!serviceTitle) {
                return showError('Invalid service selection. Please choose a valid service.');
            }

            if (service.length > 0) {
                $('.alert-msg').addClass('d-none');
                let serviceId = $('#service_id').val();
                fetch("https://www.connectwithlynx.com/service_search", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRF-TOKEN': "4ZfuEu5mqi9FPZKnzGStckEf5nj1iS1n79ORhC5f" // Include CSRF token
                    },
                    body: JSON.stringify({
                        service: service,
                        service_id: serviceId,
                        zipCode: zipCode,
                        serviceTier: serviceTier,
                        date: date,
                        _token: "4ZfuEu5mqi9FPZKnzGStckEf5nj1iS1n79ORhC5f"
                    })
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        return response.json();
                    })
                    .then(response => {
                        let msgElement;
                        if (response.success) {
                            $('#searchResult-v2').addClass('d-none')
                            $('#provider_list').html(response.view).removeClass('d-none');
                            scrollCue.update();
                            $('[data-bs-toggle="tooltip"]').tooltip();

                            let currentPopover = null;

                            // Initialize popovers manually
                            document.querySelectorAll('.info-card').forEach(trigger => {
                                const content = trigger.getAttribute('data-content');

                                const popover = new bootstrap.Popover(trigger, {
                                    html: true,
                                    content: `<div class="popover-anim-wrapper">${content}</div>`, // wrap content
                                    trigger: 'manual',
                                    container: 'body',
                                    placement: 'auto',
                                    animation: false, // disable Bootstrap default
                                    template: `
                                    <div class="popover modern-popover" role="tooltip">
                                        <div class="popover-arrow"></div>
                                        <div class="popover-body"></div>
                                    </div>`
                                });

                                // Toggle on click
                                trigger.addEventListener('click', (e) => {
                                    e.stopPropagation();
                                    if (currentPopover && currentPopover !== popover) {
                                        currentPopover.hide();
                                    }

                                    if (popover._isShown?.()) {
                                        popover.hide();
                                        currentPopover = null;
                                    } else {
                                        popover.show();
                                        setTimeout(() => {
                                            const popoverEl = document.querySelector('.popover');
                                            if (popoverEl) {
                                                popoverEl.classList.add('show');
                                            }
                                        }, 10);
                                        currentPopover = popover;
                                    }
                                });
                            });

                            // Detect outside click
                            document.addEventListener('click', (e) => {
                                if (
                                    !e.target.closest('.info-card') &&
                                    !e.target.closest('.popover')
                                ) {
                                    if (currentPopover) {
                                        currentPopover.hide();
                                        currentPopover = null;
                                    }
                                }
                            });
                        } else {
                            $('#provider_list').empty().addClass('d-none');
                            $('#searchResult-v2').removeClass('d-none')
                            $('#userConfirmation').addClass('d-none')
                        }
                        $(this).prop('disabled', false).html('Search');
                    })
                    .catch(error => {
                        if (error.message === '419') {
                            Swal.fire({
                                title: 'Session Expired',
                                text: 'Your session has expired. Please refresh the page and try again.',
                                imageUrl: 'https://www.connectwithlynx.com/frontend_assets/img/modal_logo.svg',
                                imageWidth: 77,
                                imageHeight: 77,
                                showCancelButton: false,
                                showCloseButton: true,
                                confirmButtonText: 'Reload Page',
                                customClass: {
                                    confirmButton: 'btn btn-primary rounded-pill w-20',
                                },
                                buttonsStyling: false
                            }).then(() => {
                                location.reload();
                            });
                        } else {
                            Swal.fire({
                                icon: 'error',
                                text: 'Error occurred while searching services',
                                customClass: {
                                    confirmButton: 'btn btn-primary rounded-pill w-20',
                                },
                                buttonsStyling: false
                            });
                        }
                        $(this).prop('disabled', false).html('Search');
                        console.error('Fetch error:', error);
                    });
            } else {
                $('#suggestions-list').html('').hide();
                selectedIndex = -1;
            }
        }

        function searchOnZipCode(zipCode){
            $('#provider_list').empty().addClass('d-none');
            if (zipCode.length == 0){
                $('#zip_code').removeClass('fill-inputs-design');
                $('#provider_list').empty().addClass('d-none');
                $('#providerCount').remove();
                return showError('Please enter a zip code.');
            }
            if (zipCode.length >= 5) {
                $('#zip_code').addClass('fill-inputs-design');

                if ($('#userConfirmation').hasClass('d-none')) {
                    searchProvider();
                }
            }else{
                $('#zip_code').removeClass('fill-inputs-design');
            }
        }

        $(document).on('click', '.clear-result', function () {
            fetch("https://www.connectwithlynx.com/clear-index-session", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRF-TOKEN': "4ZfuEu5mqi9FPZKnzGStckEf5nj1iS1n79ORhC5f"
                },
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        $('#service-text').val('').removeClass('fill-inputs-design').prop('disabled', false);
                        $('#zip_code, #schedule').val('').removeClass('fill-inputs-design');
                        $('#service_tier').removeClass('fill-inputs-design');
                        $('.service_tier').removeClass('active');
                        selected_service_tier = '';
                        $('.schedule-fa-eraser').hide();
                        $('#howSoon, #emergencyDate, #scheduleDate, #zipCode').addClass('d-none');
                        $('#search-icon').addClass('uil uil-search').empty();
                        $('#provider_list').empty('').addClass('d-none');
                        updateCounts();
                    }
                })
                .catch(error => {
                    console.error('Session clear failed:', error);
                });
        });

        $(document).on('input', '.providerNameSearch', function() {
            const searchTerm = this.value.toLowerCase().trim();
            let filteredCount = 0;
            $('.provider-card').each(function() {
                const name = $(this).data('name')?.toLowerCase().trim() || '';
                if (name.includes(searchTerm)) {
                    $(this).show();
                    filteredCount++;
                } else {
                    $(this).hide();
                }
            });
            updateCounts();
        });

        $(document).on('click', '.clear-provider', function() {
            $('.providerNameSearch').val('').trigger('input');
            $('.show-search-results').removeClass('active-provider-list');
            updateCounts();
        });

        window.addEventListener('pageshow', function (event) {
            if (event.persisted || performance.getEntriesByType("navigation")[0].type === "back_forward") {
                if (window.sessionToken == null) {
                    $.get('https://www.connectwithlynx.com/check-login', function (res) {
                        if (res.loggedIn) {
                            Swal.fire({
                                icon: 'success',
                                title: 'Welcome back!',
                                text: 'You are logged in.',
                                customClass: {
                                    confirmButton: 'btn btn-primary rounded-pill w-20',
                                },
                                buttonsStyling: false
                            });
                            window.sessionToken = 'true';
                            window.userType = res.userType;
                            updateHeaderAfterLogin();
                        }
                    });
                }
                let indexService = "";

                if (indexService != '') {
                    let indexServiceId = "";
                    let indexServiceCat = "";
                    let indexZipCode = "";
                    let indexServiceTier = "";
                    let indexScheduleTime = "";
                    $('#service-text').attr('data-title', indexServiceCat + ' > ' + indexService);
                    //convert comma separated string to array
                    let serviceIdArray = indexServiceId.split(',');
                    //get first element of the array
                    if (serviceIdArray.length > 1) {
                        $('#service_id').val(serviceIdArray[0]);
                    } else {
                        $('#service_id').val(indexService);
                    }

                    $('#zip_code').val(indexZipCode);
                    $('#schedule').val(indexScheduleTime);
                    $('#search-icon').removeClass('uil uil-search').html('<span class="badge bg-primary rounded-pill">X</span>');

                    setActiveServiceTier(indexServiceTier);
                    searchOnZipCode(indexZipCode);

                    if ($(window).width() <= 992) { // or use 767 or 576 depending on your breakpoint
                        const $target = $('.search-form');
                        if ($target.length) {
                            const offset = $target.offset().top - 164; // adjust for header if needed
                            $('html, body').animate({
                                scrollTop: offset
                            }, 600);
                        }
                    }
                    $('.schedule-fa-eraser').show();
                } else {
                    $('#service-text, #zip_code, #schedule').val('');
                    $('.service_tier').removeClass('active');
                    selected_service_tier = '';
                    $('.schedule-fa-eraser').hide();
                    $('#howSoon, #emergencyDate, #scheduleDate, #zipCode').addClass('d-none');
                    $('#search-icon').empty().addClass('uil uil-search');
                }
            }
        });

        window.onload = function() {
            //check php session data
            let indexService = "";

            if (indexService !== '') {
                let indexServiceCat = "";
                let indexZipCode = "";
                let indexServiceTier = "";
                let indexScheduleTime = "";
                $('#service-text').attr('data-title', indexServiceCat + ' > ' + indexService);
                $('#zip_code').val(indexZipCode);
                if(indexServiceTier !== ""){
                    $('#howSoon').addClass('show').removeClass('d-none');
                }
                $('#schedule').val(indexScheduleTime);
                $('.schedule-fa-eraser').show();
                $('#search-icon').removeClass('uil uil-search').html('<span class="badge bg-primary rounded-pill">X</span>');

                setActiveServiceTier(indexServiceTier);
                searchOnZipCode(indexZipCode);

                //scroll page to search form
                if ($(window).width() <= 992) { // or use 767 or 576 depending on your breakpoint
                    const $target = $('.search-form');
                    if ($target.length) {
                        const offset = $target.offset().top - 164; // adjust for header if needed
                        $('html, body').animate({
                            scrollTop: offset
                        }, 600);
                    }
                }
            } else {
                $('#service-text, #zip_code, #schedule').val('');
                $('.service_tier').removeClass('active');
                selected_service_tier = '';
                $('.schedule-fa-eraser').hide();
                $('#howSoon, #emergencyDate, #scheduleDate, #zipCode').addClass('d-none');
                $('#search-icon').empty().addClass('uil uil-search');
            }
        };

        $(document).on('click', '.not-search-close', function(){
            $('#searchResult-v2').addClass('d-none');
        });

        $(".search-form-result").on("click", "#searchProviderButton", function() {
            'use strict';
            $(".show-search-results").toggleClass('active-provider-list');
        });

        function setActiveServiceTier(selected_service_tier) {
            document.querySelectorAll('.service_tier').forEach(el => {
                el.classList.remove('active');
            });
            const activeOption = document.querySelector(`.service_tier[value="${selected_service_tier}"]`);
            if (activeOption) {
                activeOption.classList.add('active');
                activeOption.click();
            }
        }

        function updateCounts() {
            const filteredCount = $('.provider-card:visible').length;
            let text = filteredCount + " service provider";
            if (filteredCount !== 1) {
                text += "s"; // Add "s" for plural
            }
            text += " found";
            $('#provider-count-text').text(text);
        }
    </script>

    <script>
        const customSelect = document.querySelector(".custom-select");
        const selectedText = document.querySelector(".selected-text");
        const optionsList = document.querySelector(".options-list");
        const options = document.querySelectorAll(".option");
        let wasOpen = false;

        // Toggle dropdown
        function toggleDropdown(e) {
            e.stopPropagation();
            hideNoProviderPart();
            wasOpen = customSelect.classList.contains("open");
            const isNowOpen = customSelect.classList.toggle("open");
            optionsList.style.display = customSelect.classList.contains("open") ? "block" : "none";
            if (!isNowOpen && wasOpen) {
                const activeOption = customSelect.querySelector("li.option.active");
                if (activeOption) {
                    searchProvider();
                }
            }
        }

        // Select option
        options.forEach(option => {
            option.addEventListener("click", () => {
                selectedText.innerHTML = option.innerHTML;
                options.forEach(opt => opt.classList.remove("active"));
                option.classList.add("active");
                customSelect.classList.remove("open");
                optionsList.style.display = "none";
            });
        });

        // Open dropdown on text click
        selectedText.addEventListener("click", toggleDropdown);

        // Close on outside click
        document.addEventListener("click", (e) => {
            if (!customSelect.contains(e.target)) {
                customSelect.classList.remove("open");
                optionsList.style.display = "none";
            }
        });
    </script>
<script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function(OneSignal) {
        await OneSignal.init({
            appId: "9efadb6f-d235-4e3c-8f52-b41fb16c36fa",
            notifyButton: { enable: false },
            promptOptions: {
                slidedown: {
                    enabled: true,
                    autoPrompt: true
                }
            }
        });

        var osId =  OneSignal.User.PushSubscription.id;

        if(osId != null && osId != undefined && osId != '') {
            $('#pcDeviceToken').val(osId);
        }

        console.log("OneSignal initialized successfully.");
        console.log(osId);
    });

    $(function() {
        $.getScript("https://www.connectwithlynx.com/vendor/sweetalert/sweetalert.all.js")
            .done(function() {
                console.log("SweetAlert2 loaded successfully.");
                // You can now use Swal.fire(...)
            })
            .fail(function() {
                console.error("Failed to load SweetAlert2 from local path.");
                // Optionally notify user or fallback to an alternative handling
            });
    });

    function updateHeaderAfterLogin() {
        console.log("sessionToken:", window.sessionToken);
        console.log("userType:", window.userType);
        if (window.sessionToken === 'true' && window.userType !== '') {
            // Hide all login sections
            $('.login-section').hide();

            // Show all account sections
            $('.account-section').show();

            // Show role-specific items
            if (window.userType === 'customer') {
                $('.customer-only').show();
            } else if (window.userType === 'provider') {
                $('.provider-only').show();
            } else {
                $('.employee-only').show();
            }
        } else {
            // Not logged in
            $('.login-section').show();
            $('.account-section').hide();
        }
    }

    $(document).ready(function() {
        updateHeaderAfterLogin();
    });

    $(document).on('click', '.password-toggle', function() {
        const $icon = $(this).find('i');
        const $input = $(this).siblings('input');

        if ($input.attr('type') === 'password') {
            $input.attr('type', 'text');
            $icon.removeClass('uil-eye').addClass('uil-eye-slash');
        } else {
            $input.attr('type', 'password');
            $icon.removeClass('uil-eye-slash').addClass('uil-eye');
        }
    });

    $(document).on('click', '.user-logout', function(e) {
        e.stopPropagation();
        e.preventDefault();
        window.location.href = "https://www.connectwithlynx.com/logout";
    });
</script>



<script>
    if(clientIdentity != ""){
        window.addEventListener('load', async () => {

            if (!chatClient) {
                chatClient = await initTwilioClient(clientIdentity);
            }
            console.log("Client is Connect...", chatClient);

            //send chat msg button
            $(document).on('click', '#send-button, #fullscreen-send-button', async function () {
                const $btn = $(this);
                if ($btn.hasClass('disabled')) return;

                // Determine which input to use
                const isFullscreen = $btn.attr('id') === 'fullscreen-send-button';
                const inputSelector = isFullscreen ? '#fullscreen-lynx-message-input' : '#lynx-message-input';
                const $input = $(inputSelector);
                const text = $input.val().trim();

                if (!text) {
                    $input[0].setCustomValidity("Please enter your message.");
                    $input[0].reportValidity();
                    return;
                }

                $input[0].setCustomValidity(""); // clear previous errors

                if (activeClientChannel) {
                    $('.no-msg').remove();
                    $btn.addClass('disabled');
                    await activeClientChannel.sendMessage(text, {
                        user_name: $('#chatAuthUserName').val(),
                        identity: $('#chatUserIdentity').val(),
                        user_type: $('#chatAuthUserType').val(),
                    });

                    $input.val(''); // clear input
                    $btn.removeClass('disabled');
                } else {
                    console.log('No active channel. Please wait page is loading.');
                }
            });

            // Enter key listener for both input fields
            $(document).on('keypress', '#lynx-message-input, #fullscreen-lynx-message-input', function (e) {
                if (e.which === 13 && !e.shiftKey) {
                    e.preventDefault();

                    const inputId = $(this).attr('id');

                    if (inputId === 'lynx-message-input') {
                        $('#send-button').click();
                    } else if (inputId === 'fullscreen-lynx-message-input') {
                        $('#fullscreen-send-button').click();
                    }
                }
            });
        });
    }

    async function initTwilioClient(identity) {
        const tokenKey = "twilioChatToken";
        let token = localStorage.getItem(tokenKey);
        if (!token) {
            token = await fetchTwilioToken(identity);
            localStorage.setItem(tokenKey, token);
        }

        try {
            chatClient = await Twilio.Chat.Client.create(token);
            // console.log("Client Connect: ", chatClient);
        } catch (err) {
            console.warn("Token invalid or expired. Refreshing...");
            token = await fetchTwilioToken(identity);
            localStorage.setItem(tokenKey, token);
            chatClient = await Twilio.Chat.Client.create(token);
        }

        chatClient.on("tokenAboutToExpire", async () => {
            console.log("Token Expire. Refreshing...");
            const newToken = await fetchTwilioToken(identity);
            await chatClient.updateToken(newToken);
            localStorage.setItem(tokenKey, newToken);
        });

        return chatClient;
    }

    async function fetchTwilioToken(identity) {
        try {
            const response = await $.ajax({
                url: "https://www.connectwithlynx.com/twilio-token-generate",
                method: 'POST',
                data: {identity},
                headers: {
                    'X-CSRF-TOKEN': "4ZfuEu5mqi9FPZKnzGStckEf5nj1iS1n79ORhC5f"
                }
            });
            return response.token;
        } catch (error) {
            console.error("Failed to fetch Twilio token", error);
            throw new Error("Token fetch failed");
        }
    }

    async function getChannelMessages(channelName,identity) {

        activeClientChannel = await getOrCreateChannel(channelName);
        console.log('load channel: ', activeClientChannel);

         await loadPreviousMessages(activeClientChannel, identity);

        if (!activeClientChannel._hasMessageHandler) {
            activeClientChannel.on('messageAdded', async message => {
                console.log('new add messsage: ', message);
                renderMessage(message, identity);
            });
            activeClientChannel._hasMessageHandler = true;
        }
    }

    async function getOrCreateChannel(channelName) {
        try {
            return await chatClient.getChannelByUniqueName(channelName);
        } catch (err) {
            console.log(err.body);
        }
    }

    async function loadPreviousMessages(channel, identity) {
        try {
             $('#lynx-messages').html('');
             $('#fullscreen-lynx-messages').html('');
             $('#lynx-messages').append('<div class="d-flex justify-content-center channel-loader mt-5"><div class="spinner-border" role="status" style="color: #1e4d5a;"><span class="sr-only"></span></div></div>');
             $('#fullscreen-lynx-messages').append('<div class="d-flex justify-content-center channel-loader mt-5"><div class="spinner-border" role="status" style="color: #1e4d5a;"><span class="sr-only"></span></div></div>');
             const messages = (await channel.getMessages(50)).items;
             console.log('load message: ', messages);
             setTimeout(() => {
                 $('#lynx-messages').html('');
                 $('#fullscreen-lynx-messages').html('');
                if(messages.length === 0){
                     $('#lynx-messages').html('<p class="text-dark mt-5 text-center no-msg">No messages Found.</p>');
                     $('#fullscreen-lynx-messages').html('<p class="text-dark mt-5 text-center no-msg">No messages Found.</p>');
                }else{
                    messages.forEach(msg => renderMessage(msg, identity));
                }

                scrollToBottom();
             }, 1000);
        } catch (err) {
            console.error("Failed to load previous messages:", err);
        }
    }

    function renderMessage(msg, identity) {
        try {
            // console.log(msg.attributes);
            const timestamp = formatChatTimestamp(msg.timestamp);
            const isCurrentUser = msg.author === identity;

            let chatUserName = msg.attributes.user_name || 'unknown';
            let chatIUserIdentity = msg.attributes.identity || 'unknown';
            let chatUserType = msg.attributes.user_type || 'unknown';

            if (chatIUserIdentity === identity) {
                chatUserName = '';
            } else if (chatUserType === "employee") {
                chatUserName = 'Employee';
            } else {
                chatUserName = chatUserName;
            }

            let chatHtml = '';
            if (isCurrentUser) {
                // Sent by current user
                chatHtml = `
                    <div class="d-flex justify-content-end mb-3 f-count">
                        <div class="w-100 d-flex flex-column justify-content-end">
                            <div class="lynx-my-message chat-message-box-lynx ms-auto">
                                <p class="mb-0">${escapeHtml(msg.body || '')}</p>
                                <p class="text-secondary small mb-0 mt-1 ms-auto chat-time">${timestamp}</p>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                // Message from others
                const displayName =(chatUserType === 'Employee') ? 'Employee' : escapeHtml(chatUserName);

                chatHtml = `
                    <div class="d-flex mb-3 f-count">
                        <div class="align-items-start w-100 d-flex flex-column justify-content-end">
                            <div class="lynx-message-oponent chat-message-box-lynx aline-items-start">
                                <b class="text-dark mb-0 fs-14">${displayName}</b>
                                <p class="text-dark mb-0">${escapeHtml(msg.body || '')}</p>
                                <p class="text-secondary small mb-0 mt-1 ms-auto chat-time">${timestamp}</p>
                            </div>
                        </div>
                    </div>
                `;
            }

            // $('.chatbox-body').append(chatHtml);
             $('#lynx-messages').append(chatHtml);
             $('#fullscreen-lynx-messages').append(chatHtml);
             scrollToBottom();
        } catch (e) {
            console.warn("Invalid message format:", msg.body);
        }
    }

    function scrollToBottom() {
        // Delay scrolling slightly
        setTimeout(() => {
            const container = document.querySelector('.lynx-messages');
            const fullscreencontainer = document.querySelector('#fullscreen-lynx-messages');
            container.scrollTop = container.scrollHeight;
            fullscreencontainer.scrollTop = fullscreencontainer.scrollHeight;
        }, 50);
    }

    function escapeHtml(text) {
        return text
            .replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;")
            .replace(/"/g, "&quot;")
            .replace(/'/g, "&#039;");
    }

    function formatChatTimestamp(timestamp) {
        const date = new Date(timestamp);

        const day = String(date.getDate()).padStart(2, '0');
        const monthNames = ["JAN", "FEB", "MAR", "APR", "MAY", "JUN",
            "JUL", "AUG", "SEP", "OCT", "NOV", "DEC"];
        const month = monthNames[date.getMonth()];
        const year = date.getFullYear();

        let hours = date.getHours();
        const minutes = String(date.getMinutes()).padStart(2, '0');
        const ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12;
        hours = hours ? hours : 12; // convert '0' to '12'

        return `${day} ${month} ${year} ${hours}:${minutes} ${ampm}`;
    }

    //Conversion Button Onclick
    $(document).on('click','.lynx-chat-button',function(){
            $('.viewchat').addClass('d-none');
            $('#lynx-contacts-list').html('');
            $('#lynx-contacts-list').append('<div class="d-flex justify-content-center channel-loader mt-5"><div class="spinner-border" role="status" style="color: #1e4d5a;"><span class="sr-only"></span></div></div>');
            fetch("https://www.connectwithlynx.com/conversation-list", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "X-CSRF-TOKEN": "4ZfuEu5mqi9FPZKnzGStckEf5nj1iS1n79ORhC5f"
                },
                body: JSON.stringify({
                    identity_name: ""
                })
            })
            .then(response => response.json())
            .then(data => {

                if (data.success) {
                    $('#lynx-contacts-list').html('');
                    $('#lynx-contacts-list').append(data.html);
                } else {
                    Swal.fire('Error!', data.message || 'conversion list failed.', 'error');
                }
            })
            .catch(error => {
                console.error('Resume error:', error);
                Swal.fire('Error!', 'Something went conversion list.', 'error');
            });
    });

    //Conversion Name Onclick
    $(document).on('click','.lynx-list-chat-item',async function(){

        $('.lynx-list-chat-item').removeClass('active');
        $(this).addClass('active');

        $('#lynx-chat-view').removeClass('d-none');
        $('#lynx-contacts-view').addClass('d-none');
        const channel = $(this).data('channel');
        const request_status = $(this).data('request-status');
        const joinUsers = $(this).data('user');
        // console.log(request_status);
        const identity = clientIdentity;
        await getChannelMessages(channel,clientIdentity);
        // console.log(channel);
        //  console.log(identity);
        const frendlyname = $(this).data('name');
        $('#chat-name').html('');
        $('#chat-users-name').html('');
        $('#fullscreen-chat-lynx-users-name').html('');
        $('#chat-name').append(frendlyname);//frendly name
        $('#chat-users-name').append(joinUsers);
        $('#fullscreen-chat-lynx-users-name').append(joinUsers);

        if(request_status ==='completed'){
            $('.chat-msg-bottom').addClass('d-none');
        }else{
             $('.chat-msg-bottom').removeClass('d-none');
        }
        
    //this code comment
    


    });

    if (jQuery('#lynx-chat-button').length > 0) {
        document.addEventListener("DOMContentLoaded", function() {
            const chatLynxButton = document.getElementById("lynx-chat-button");
            const chatContainer = document.getElementById("lynx-chat-container");
            const minimizeContacts = document.getElementById("lynx-contacts-minimize");
            const minimizeChat = document.getElementById("minimize-lynx-chat");
            const expandContacts = document.getElementById("expand-contacts");
            const expandChat = document.getElementById("expand-chat");
            const exitFullscreenChat = document.getElementById("exit-fullscreen-lynx-chat");
            const messageInput = document.getElementById("lynx-message-input1");
            const sendButton = document.getElementById("send-button1");
            const fullscreenMessageInput = document.getElementById("fullscreen-lynx-message-input1");
            const fullscreenSendButton = document.getElementById("fullscreen-send-button1");
            const chatMessages = document.getElementById("lynx-messages");
            const fullscreenChatMessages = document.getElementById("fullscreen-lynx-messages");
            const contactsView = document.getElementById("lynx-contacts-view");
            const chatView = document.getElementById("lynx-chat-view");
            const backToContacts = document.getElementById("lynx-back-to-contacts");
            const chatName = document.getElementById("chat-name");
            const chatStatus = document.getElementById("chat-status");
            const chatAvatar = document.getElementById("chat-avatar");
            const fullscreenChatName = document.getElementById("fullscreen-chat-lynx-name");
            const fullscreenChatStatus = document.getElementById("fullscreen-chat-lynx-status");
            const fullscreenChatAvatar = document.getElementById("fullscreen-chat-lynx-avatar");
            const contactsList = document.getElementById("lynx-contacts-list");
            const fullscreenContactsList = document.getElementById("fullscreen-contacts-lynx-list");
            const normalLayout = document.getElementById("lynx-normal-layout");
            const fullscreenLayout = document.getElementById("lynx-fullscreen-layout");
            // Contact items
            const contactItems = document.querySelectorAll(".lynx-list-chat-item");
            // Chat history for each contact
            const chatHistory = {
                1: [{
                    sender: "them",
                    message: "Hey there! How are you doing today?",
                    time: "10:24 AM"
                }],
                2: [{
                    sender: "them",
                    message: "Let's meet up for coffee this weekend!",
                    time: "Yesterday"
                }],
                3: [{
                    sender: "them",
                    message: "Did you see that new movie? It was amazing!",
                    time: "2d ago"
                }],
                4: [{
                    sender: "them",
                    message: "Thanks for your help with the project!",
                    time: "1w ago"
                }],
                5: [{
                    sender: "them",
                    message: "Are we still on for lunch tomorrow?",
                    time: "3w ago"
                }],
                6: [{
                    sender: "them",
                    message: "Just sent you the files you requested",
                    time: "1m ago"
                }],
            };
            let currentContactId = null;
            let isFullscreen = false;
            // Toggle chat visibility
            chatLynxButton.addEventListener("click", function() {
                chatContainer.classList.toggle("d-none");
                chatLynxButton.classList.toggle("d-none");
                jQuery("body").toggleClass("active-lynx-chat");
                chatContainer.classList.remove("lynx-minimized");
                // Show contacts view by default
                contactsView.classList.remove("d-none");
                chatView.classList.add("d-none");
            });
            // Minimize chat
            minimizeContacts.addEventListener("click", function() {
                minimizeAndHide();
            });
            minimizeChat.addEventListener("click", function() {
                minimizeAndHide();
            });

            function minimizeAndHide() {
                // If in fullscreen, exit fullscreen first
                if (isFullscreen) {
                    toggleFullscreen();
                }
                chatContainer.classList.add("lynx-minimized");
                setTimeout(() => {
                    chatContainer.classList.add("d-none");
                    chatLynxButton.classList.remove("d-none");
                    jQuery("body").removeClass("active-lynx-chat");
                    // document.querySelectorAll("body").classList.remove("active-lynx-chat");
                }, 300);
            }
            // Toggle fullscreen mode
            expandContacts.addEventListener("click", function() {
                toggleFullscreen();
            });
            expandChat.addEventListener("click", function() {
                toggleFullscreen();
            });

            exitFullscreenChat.addEventListener("click", function() {
                toggleFullscreen();
            });

            function toggleFullscreen() {
                chatContainer.classList.toggle("lynx-fullscreen");
                isFullscreen = !isFullscreen;
                if (isFullscreen) {
                    // Switch to fullscreen layout
                    normalLayout.classList.add("d-none");
                    fullscreenLayout.classList.remove("d-none");
                    // Clone contacts to fullscreen sidebar
                    cloneContactsToFullscreen();
                    // Update fullscreen chat header if a contact is selected
                    if (currentContactId) {
                        updateFullscreenChatHeader();
                        // loadFullscreenChatHistory(currentContactId);
                    }
                } else {
                    // Switch back to normal layout
                    normalLayout.classList.remove("d-none");
                    fullscreenLayout.classList.add("d-none");
                }

                const container = document.getElementById('fullscreen-lynx-messages');
                const fullscreencount = container.querySelectorAll('.f-count').length;
                if (fullscreencount === 0) {
                    const activeItem = document.querySelector('.lynx-list-chat-item.active');
                    if (activeItem) {
                        activeItem.click(); // Trigger click on active item
                        const name = activeItem.getAttribute('data-name');
                        $('#fullscreen-chat-lynx-name').text(name);
                        const allusers = activeItem.getAttribute('data-user');
                        $('#fullscreen-chat-lynx-users-name').text(allusers);
                    }
                }else{
                    const activeItem = document.querySelector('.lynx-list-chat-item.active');
                    const name = activeItem.getAttribute('data-name');
                    $('#fullscreen-chat-lynx-name').text(name);
                    const allusers = activeItem.getAttribute('data-user');
                    $('#fullscreen-chat-lynx-users-name').text(allusers);
                }
                // console.log('t',fullscreencount);
            }
            // Clone contacts to fullscreen sidebar
            function cloneContactsToFullscreen() {
                fullscreenContactsList.innerHTML = "";
                const contacts = contactsList.querySelectorAll(".lynx-list-chat-item");
                contacts.forEach((contact) => {
                    const clone = contact.cloneNode(true);
                    fullscreenContactsList.appendChild(clone);
                    // Add click event to the cloned contact
                    clone.addEventListener("click", function() {
                        const contactId = this.getAttribute("data-contact-id");
                        const name = this.getAttribute("data-name");
                        const status = this.getAttribute("data-status");
                        const avatar = this.querySelector("img").src;
                        // Update fullscreen chat header
                        fullscreenChatName.textContent = name;
                        // fullscreenChatStatus.textContent = status;
                        fullscreenChatAvatar.src = avatar;
                        // Set current contact
                        currentContactId = contactId;
                        // Load chat history in fullscreen
                        // loadFullscreenChatHistory(contactId);
                        // Highlight selected contact
                        highlightSelectedContact(contactId);
                    });
                    // Highlight current contact if one is selected
                    if (currentContactId && contact.getAttribute("data-contact-id") ===
                        currentContactId) {
                        clone.classList.add("active");
                    }
                });
            }
            // Highlight selected contact
            function highlightSelectedContact(contactId) {
                // Remove highlight from all contacts
                const fullscreenContacts = fullscreenContactsList.querySelectorAll(".lynx-list-chat-item");
                fullscreenContacts.forEach((contact) => {
                    contact.classList.remove("active");
                });
                // Add highlight to selected contact
                const selectedContact = fullscreenContactsList.querySelector(
                    `.lynx-list-chat-item[data-contact-id="${contactId}"]`);
                if (selectedContact) {
                    selectedContact.classList.add("active");
                }
            }
            // Update fullscreen chat header
            function updateFullscreenChatHeader() {
                const selectedContact = contactsList.querySelector(
                    `.lynx-list-chat-item[data-contact-id="${currentContactId}"]`);
                if (selectedContact) {
                    const name = selectedContact.getAttribute("data-name");
                    const status = selectedContact.getAttribute("data-status");
                    const avatar = selectedContact.querySelector("img").src;
                    fullscreenChatName.textContent = name;
                    // fullscreenChatStatus.textContent = status;
                    fullscreenChatAvatar.src = avatar;
                }
            }
            // Handle contact selection in normal mode
            contactItems.forEach((item) => {
                item.addEventListener("click", function() {
                    const contactId = this.getAttribute("data-contact-id");
                    const name = this.getAttribute("data-name");
                    const status = this.getAttribute("data-status");
                    const avatar = this.querySelector("img").src;
                    // Update chat header
                    chatName.textContent = name;
                    // chatStatus.textContent = status;
                    chatAvatar.src = avatar;
                    // Switch to chat view
                    contactsView.classList.add("d-none");
                    chatView.classList.remove("d-none");
                    // Set current contact
                    currentContactId = contactId;
                    // Load chat history
                    loadChatHistory(contactId);
                    // If in fullscreen, update fullscreen chat as well
                    if (isFullscreen) {
                        updateFullscreenChatHeader();
                        loadFullscreenChatHistory(contactId);
                        highlightSelectedContact(contactId);
                    }
                });
            });
            // Back to contacts
            backToContacts.addEventListener("click", function() {
                contactsView.classList.remove("d-none");
                chatView.classList.add("d-none");
            });
            // Load chat history in normal mode
            function loadChatHistory(contactId) {
                // Clear current messages
                chatMessages.innerHTML = "";
                // Add messages from history
                if (chatHistory[contactId]) {
                    chatHistory[contactId].forEach((msg) => {
                        const messageElement = createMessageElement(msg.sender, msg.message, msg.time,
                            chatAvatar.src);
                        chatMessages.appendChild(messageElement);
                    });
                }
                // Add typing indicator for first contact
                /*if (contactId === "1") {
                    const typingIndicator = document.createElement("div");
                    typingIndicator.className = "d-flex mb-3";
                    typingIndicator.innerHTML = `
                    <img src="${chatAvatar.src}" alt="User Avatar" class="rounded-circle me-2" width="32" height="32">
                    <!--<div class="lynx-typing bg-light rounded-3 py-2 px-3">
                        <div class="d-flex gap-1">
                            <span class="rounded-circle bg-secondary" style="width: 8px; height: 8px;"></span>
                            <span class="rounded-circle bg-secondary" style="width: 8px; height: 8px;"></span>
                            <span class="rounded-circle bg-secondary" style="width: 8px; height: 8px;"></span>
                        </div>
                    </div>
                    -->
                `;
                    chatMessages.appendChild(typingIndicator);
                } */
                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            // Load chat history in fullscreen mode
            function loadFullscreenChatHistory(contactId) {
                // Clear current messages
                fullscreenChatMessages.innerHTML = "";
                // Add messages from history
                if (chatHistory[contactId]) {
                    chatHistory[contactId].forEach((msg) => {
                        const messageElement = createMessageElement(msg.sender, msg.message, msg.time,
                            fullscreenChatAvatar.src);
                        fullscreenChatMessages.appendChild(messageElement);
                    });
                }
                // Add typing indicator for first contact
                /*if (contactId === "1") {
                    const typingIndicator = document.createElement("div");
                    typingIndicator.className = "d-flex mb-3";
                    typingIndicator.innerHTML = `
                    <img src="${fullscreenChatAvatar.src}" alt="User Avatar" class="rounded-circle me-2" width="32" height="32">
                    <!--<div class="lynx-typing bg-light rounded-3 py-2 px-3">
                        <div class="d-flex gap-1">
                            <span class="rounded-circle bg-secondary" style="width: 8px; height: 8px;"></span>
                            <span class="rounded-circle bg-secondary" style="width: 8px; height: 8px;"></span>
                            <span class="rounded-circle bg-secondary" style="width: 8px; height: 8px;"></span>
                        </div>
                    </div>-->
                `;
                    fullscreenChatMessages.appendChild(typingIndicator);
                }*/
                // Scroll to bottom
                fullscreenChatMessages.scrollTop = fullscreenChatMessages.scrollHeight;
            }
            // Create message element
            function createMessageElement(sender, message, time, avatarSrc) {
                const messageElement = document.createElement("div");
                if (sender === "me") {
                    messageElement.className = "d-flex justify-content-end mb-3";
                    messageElement.innerHTML = `
                    <div class="w-100 d-flex flex-column justify-content-end">
                        <div class="lynx-my-message chat-message-box-lynx ms-auto">
                            <p class="mb-0">${message}</p>
                            <p class="text-secondary small mb-0 mt-1 ms-auto chat-time">${time}</p>
                        </div>
                    </div>
                `;
                } else {
                    messageElement.className = "d-flex mb-3";
                    messageElement.innerHTML = `
                    <img src="${avatarSrc}" alt="User Avatar" class="rounded-circle me-2" width="32" height="32">
                    <div class="align-items-start w-100 d-flex flex-column justify-content-end">
                        <div class="lynx-message-oponent chat-message-box-lynx aline-items-start">
                            <p class="text-dark mb-0">${message}</p>
                            <p class="text-secondary small mb-0 mt-1 ms-auto chat-time">${time}</p>
                        </div>
                    </div>
                `;
                }
                return messageElement;
            }
            // Send message function for normal mode
            function sendMessage() {
                const message = messageInput.value.trim();
                if (message && currentContactId) {
                    // Create message element
                    const currentTime = new Date();
                    const timeString = currentTime.getHours() + ":" + (currentTime.getMinutes() < 10 ? "0" :
                        "") + currentTime.getMinutes();
                    // Add to chat history
                    if (!chatHistory[currentContactId]) {
                        chatHistory[currentContactId] = [];
                    }
                    chatHistory[currentContactId].push({
                        sender: "me",
                        message: message,
                        time: "Just now",
                    });
                    // Add message to normal chat
                    const messageElement = createMessageElement("me", message, "Just now", chatAvatar.src);
                    chatMessages.appendChild(messageElement);
                    messageInput.value = "";
                    // If in fullscreen, add message to fullscreen chat as well
                    if (isFullscreen) {
                        const fullscreenMessageElement = createMessageElement("me", message, "Just now",
                            fullscreenChatAvatar.src);
                        fullscreenChatMessages.appendChild(fullscreenMessageElement);
                        fullscreenChatMessages.scrollTop = fullscreenChatMessages.scrollHeight;
                    }
                    // Auto-scroll to the bottom
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    // Simulate response after a delay
                    setTimeout(() => {
                        const responses = ["Thanks for your message!", "I'll get back to you soon.",
                            "That sounds great!", "Let me think about that.",
                            "Perfect, thanks for letting me know!"
                        ];
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        chatHistory[currentContactId].push({
                            sender: "them",
                            message: randomResponse,
                            time: "Just now",
                        });
                        // Add response to normal chat
                        const responseElement = createMessageElement("them", randomResponse, "Just now",
                            chatAvatar.src);
                        chatMessages.appendChild(responseElement);
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                        // If in fullscreen, add response to fullscreen chat as well
                        if (isFullscreen) {
                            const fullscreenResponseElement = createMessageElement("them",
                                randomResponse, "Just now", fullscreenChatAvatar.src);
                            fullscreenChatMessages.appendChild(fullscreenResponseElement);
                            fullscreenChatMessages.scrollTop = fullscreenChatMessages.scrollHeight;
                        }
                    }, 1000);
                }
            }
            // Send message function for fullscreen mode
            function sendFullscreenMessage() {
                const message = fullscreenMessageInput.value.trim();
                if (message && currentContactId) {
                    // Create message element
                    const currentTime = new Date();
                    const timeString = currentTime.getHours() + ":" + (currentTime.getMinutes() < 10 ? "0" :
                        "") + currentTime.getMinutes();
                    // Add to chat history
                    if (!chatHistory[currentContactId]) {
                        chatHistory[currentContactId] = [];
                    }
                    chatHistory[currentContactId].push({
                        sender: "me",
                        message: message,
                        time: "Just now",
                    });
                    // Add message to fullscreen chat
                    const fullscreenMessageElement = createMessageElement("me", message, "Just now",
                        fullscreenChatAvatar.src);
                    fullscreenChatMessages.appendChild(fullscreenMessageElement);
                    fullscreenMessageInput.value = "";
                    // Add message to normal chat as well
                    const messageElement = createMessageElement("me", message, "Just now", chatAvatar.src);
                    chatMessages.appendChild(messageElement);
                    // Auto-scroll to the bottom
                    fullscreenChatMessages.scrollTop = fullscreenChatMessages.scrollHeight;
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    // Simulate response after a delay
                    setTimeout(() => {
                        const responses = ["Thanks for your message!", "I'll get back to you soon.",
                            "That sounds great!", "Let me think about that.",
                            "Perfect, thanks for letting me know!"
                        ];
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        chatHistory[currentContactId].push({
                            sender: "them",
                            message: randomResponse,
                            time: "Just now",
                        });
                        // Add response to fullscreen chat
                        const fullscreenResponseElement = createMessageElement("them", randomResponse,
                            "Just now", fullscreenChatAvatar.src);
                        fullscreenChatMessages.appendChild(fullscreenResponseElement);
                        fullscreenChatMessages.scrollTop = fullscreenChatMessages.scrollHeight;
                        // Add response to normal chat as well
                        const responseElement = createMessageElement("them", randomResponse, "Just now",
                            chatAvatar.src);
                        chatMessages.appendChild(responseElement);
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }, 1000);
                }
            }
            // Send message on button click
            // sendButton.addEventListener("click", sendMessage);
            // fullscreenSendButton.addEventListener("click", sendFullscreenMessage);
            // Send message on Enter key
            // messageInput.addEventListener("keypress", function(e) {
            //     if (e.key === "Enter") {
            //         sendMessage();
            //     }
            // });
            // fullscreenMessageInput.addEventListener("keypress", function(e) {
            //     if (e.key === "Enter") {
            //         sendFullscreenMessage();
            //     }
            // });
            // Handle ESC key to exit fullscreen
            document.addEventListener("keydown", function(e) {
                if (e.key === "Escape" && isFullscreen) {
                    toggleFullscreen();
                }
            });
        });
    }
</script>
<script>
    //copy past stop
    $(document).on('paste', '#phone, #phone2, #cp_phone', function (e) {
        // alert("Welcome to the website! If you have any questions, feel free to ask.");
        e.preventDefault();
    });
</script>

</body>

</html>
